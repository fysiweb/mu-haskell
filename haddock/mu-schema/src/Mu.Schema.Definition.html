<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# language DataKinds            #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# language FlexibleInstances    #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# language PolyKinds            #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# language ScopedTypeVariables  #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# language TypeApplications     #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# language TypeFamilies         #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# language TypeOperators        #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# language UndecidableInstances #-}</span><span>
</span><span id="line-9"></span><span class="hs-comment">{-|
Description : Definition of schemas

This module gives a set of combinators
to define schemas in the sense of Avro
or Protocol Buffers.

In order to re-use definitions at both
the type and term levels, the actual
constructors are defined in types ending
with @B@, and are parametrized by the type
used to describe identifiers.
The versions without the suffix set this
parameter to 'Type', and are thought as the
API to be used in the type-level.
If you use 'reflectSchema' to obtain a term-
level representation, the parameter is set
to 'TypeRep'.
-}</span><span>
</span><span id="line-28"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Mu.Schema.Definition</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-29"></span><span class="annot"><span class="hs-comment">-- * Definition of schemas</span></span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Mu.Schema.Definition.html#Schema%27"><span class="hs-identifier">Schema'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#Schema"><span class="hs-identifier">Schema</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#SchemaB"><span class="hs-identifier">SchemaB</span></a></span><span>
</span><span id="line-31"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#TypeDef"><span class="hs-identifier">TypeDef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#TypeDefB"><span class="hs-identifier">TypeDefB</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier">ChoiceDef</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier">FieldDef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#FieldDefB"><span class="hs-identifier">FieldDefB</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#FieldType"><span class="hs-identifier">FieldType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier">FieldTypeB</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#%3A%2F%3A"><span class="hs-operator">(:/:)</span></a></span><span>
</span><span id="line-36"></span><span class="annot"><span class="hs-comment">-- * One-to-one mappings</span></span><span>
</span><span id="line-37"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#Mapping"><span class="hs-identifier">Mapping</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#Mappings"><span class="hs-identifier">Mappings</span></a></span><span>
</span><span id="line-38"></span><span class="annot"><span class="hs-comment">-- ** Finding correspondences</span></span><span>
</span><span id="line-39"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#MappingRight"><span class="hs-identifier">MappingRight</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#MappingLeft"><span class="hs-identifier">MappingLeft</span></a></span><span>
</span><span id="line-40"></span><span class="annot"><span class="hs-comment">-- * Reflection to term-level</span></span><span>
</span><span id="line-41"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier">reflectSchema</span></a></span><span>
</span><span id="line-42"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#reflectFields"><span class="hs-identifier">reflectFields</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#reflectChoices"><span class="hs-identifier">reflectChoices</span></a></span><span>
</span><span id="line-43"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#reflectFieldTypes"><span class="hs-identifier">reflectFieldTypes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier">reflectFieldType</span></a></span><span>
</span><span id="line-44"></span><span class="annot"><span class="hs-comment">-- * Supporting type classes</span></span><span>
</span><span id="line-45"></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier">KnownName</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Kind</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Proxy</span></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.TypeLits</span></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-comment">-- | A set of type definitions,</span><span>
</span><span id="line-54"></span><span class="hs-comment">--   where the names of types and fields are</span><span>
</span><span id="line-55"></span><span class="hs-comment">--   defined by type-level strings ('Symbol's).</span><span>
</span><span id="line-56"></span><span class="hs-keyword">type</span><span> </span><span id="Schema%27"><span class="annot"><a href="Mu.Schema.Definition.html#Schema%27"><span class="hs-identifier hs-var">Schema'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#Schema"><span class="hs-identifier hs-type">Schema</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-comment">-- |&#160;Type names and field names can be of any</span><span>
</span><span id="line-59"></span><span class="hs-comment">--   kind, but for many uses we need a way</span><span>
</span><span id="line-60"></span><span class="hs-comment">--   to turn them into strings at run-time.</span><span>
</span><span id="line-61"></span><span class="hs-comment">--   This class generalizes 'KnownSymbol'.</span><span>
</span><span id="line-62"></span><span class="hs-keyword">class</span><span> </span><span id="KnownName"><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-var">KnownName</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257460"><span class="annot"><a href="#local-6989586621679257460"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679257461"><span class="annot"><a href="#local-6989586621679257461"><span class="hs-identifier hs-type hs-type">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-63"></span><span>  </span><span id="local-6989586621679257465"><span id="nameVal"><span class="annot"><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-type">nameVal</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679257465"><span class="hs-identifier hs-type">proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257460"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span><span>
</span><span id="line-64"></span><span id="local-6989586621679257313"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KnownSymbol</span></span><span> </span><span class="annot"><a href="#local-6989586621679257313"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679257313"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-65"></span><span>  </span><span id="local-6989586621679257310"><span class="annot"><span class="annottext">nameVal :: proxy s -&gt; String
</span><a href="#local-6989586621679257310"><span class="hs-identifier hs-var hs-var hs-var hs-var">nameVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">proxy s -&gt; String
forall (n :: Symbol) (proxy :: Symbol -&gt; *).
KnownSymbol n =&gt;
proxy n -&gt; String
</span><span class="hs-identifier hs-var">symbolVal</span></span></span><span>
</span><span id="line-66"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-67"></span><span>  </span><span id="local-6989586621679257307"><span class="annot"><span class="annottext">nameVal :: proxy 'True -&gt; String
</span><a href="#local-6989586621679257307"><span class="hs-identifier hs-var hs-var hs-var hs-var">nameVal</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;True&quot;</span></span><span>
</span><span id="line-68"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-69"></span><span>  </span><span id="local-6989586621679257305"><span class="annot"><span class="annottext">nameVal :: proxy 'False -&gt; String
</span><a href="#local-6989586621679257305"><span class="hs-identifier hs-var hs-var hs-var hs-var">nameVal</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;False&quot;</span></span><span>
</span><span id="line-70"></span><span id="local-6989586621679257304"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KnownNat</span></span><span> </span><span class="annot"><a href="#local-6989586621679257304"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679257304"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nat</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-71"></span><span>  </span><span id="local-6989586621679257302"><span class="annot"><span class="annottext">nameVal :: proxy n -&gt; String
</span><a href="#local-6989586621679257302"><span class="hs-identifier hs-var hs-var hs-var hs-var">nameVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; String) -&gt; (proxy n -&gt; Integer) -&gt; proxy n -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">proxy n -&gt; Integer
forall (n :: Nat) (proxy :: Nat -&gt; *).
KnownNat n =&gt;
proxy n -&gt; Integer
</span><span class="hs-identifier hs-var">natVal</span></span></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-comment">-- | A set of type definitions.</span><span>
</span><span id="line-74"></span><span class="hs-comment">--   In general, we can use any kind we want for</span><span>
</span><span id="line-75"></span><span class="hs-comment">--   both type and field names, although in practice</span><span>
</span><span id="line-76"></span><span class="hs-comment">--   you always want to use 'Symbol'.</span><span>
</span><span id="line-77"></span><span class="hs-keyword">type</span><span> </span><span id="Schema"><span class="annot"><a href="Mu.Schema.Definition.html#Schema"><span class="hs-identifier hs-var">Schema</span></a></span></span><span> </span><span id="local-6989586621679257298"><span class="annot"><a href="#local-6989586621679257298"><span class="hs-identifier hs-type">typeName</span></a></span></span><span> </span><span id="local-6989586621679257297"><span class="annot"><a href="#local-6989586621679257297"><span class="hs-identifier hs-type">fieldName</span></a></span></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#SchemaB"><span class="hs-identifier hs-type">SchemaB</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="annot"><a href="#local-6989586621679257298"><span class="hs-identifier hs-type">typeName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257297"><span class="hs-identifier hs-type">fieldName</span></a></span><span>
</span><span id="line-79"></span><span class="hs-comment">-- | A set of type definitions,</span><span>
</span><span id="line-80"></span><span class="hs-comment">--   parametric on type representations.</span><span>
</span><span id="line-81"></span><span class="hs-keyword">type</span><span> </span><span id="SchemaB"><span class="annot"><a href="Mu.Schema.Definition.html#SchemaB"><span class="hs-identifier hs-var">SchemaB</span></a></span></span><span> </span><span id="local-6989586621679257296"><span class="annot"><a href="#local-6989586621679257296"><span class="hs-identifier hs-type">builtin</span></a></span></span><span> </span><span id="local-6989586621679257295"><span class="annot"><a href="#local-6989586621679257295"><span class="hs-identifier hs-type">typeName</span></a></span></span><span> </span><span id="local-6989586621679257294"><span class="annot"><a href="#local-6989586621679257294"><span class="hs-identifier hs-type">fieldName</span></a></span></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Mu.Schema.Definition.html#TypeDefB"><span class="hs-identifier hs-type">TypeDefB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257296"><span class="hs-identifier hs-type">builtin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257295"><span class="hs-identifier hs-type">typeName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257294"><span class="hs-identifier hs-type">fieldName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-comment">-- | Defines a type in a schema.</span><span>
</span><span id="line-85"></span><span class="hs-comment">--   Each type can be:</span><span>
</span><span id="line-86"></span><span class="hs-comment">--   * a record: a list of key-value pairs,</span><span>
</span><span id="line-87"></span><span class="hs-comment">--   * an enumeration: an element of a list of choices,</span><span>
</span><span id="line-88"></span><span class="hs-comment">--   * a reference to a primitive type.</span><span>
</span><span id="line-89"></span><span class="hs-keyword">type</span><span> </span><span id="TypeDef"><span class="annot"><a href="Mu.Schema.Definition.html#TypeDef"><span class="hs-identifier hs-var">TypeDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#TypeDefB"><span class="hs-identifier hs-type">TypeDefB</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-90"></span><span class="hs-comment">-- | Defines a type in a schema,</span><span>
</span><span id="line-91"></span><span class="hs-comment">--   parametric on type representations.</span><span>
</span><span id="line-92"></span><span class="hs-keyword">data</span><span> </span><span id="TypeDefB"><span class="annot"><a href="Mu.Schema.Definition.html#TypeDefB"><span class="hs-identifier hs-var">TypeDefB</span></a></span></span><span> </span><span id="local-6989586621679257397"><span class="annot"><a href="#local-6989586621679257397"><span class="hs-identifier hs-type">builtin</span></a></span></span><span> </span><span id="local-6989586621679257398"><span class="annot"><a href="#local-6989586621679257398"><span class="hs-identifier hs-type">typeName</span></a></span></span><span> </span><span id="local-6989586621679257396"><span class="annot"><a href="#local-6989586621679257396"><span class="hs-identifier hs-type">fieldName</span></a></span></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | A list of key-value pairs.</span><span>
</span><span id="line-94"></span><span>    </span><span id="DRecord"><span class="annot"><a href="Mu.Schema.Definition.html#DRecord"><span class="hs-identifier hs-var">DRecord</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679257398"><span class="hs-identifier hs-type">typeName</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldDefB"><span class="hs-identifier hs-type">FieldDefB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257397"><span class="hs-identifier hs-type">builtin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257398"><span class="hs-identifier hs-type">typeName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257396"><span class="hs-identifier hs-type">fieldName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-comment">-- | An element of a list of choices.</span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DEnum"><span class="annot"><a href="Mu.Schema.Definition.html#DEnum"><span class="hs-identifier hs-var">DEnum</span></a></span></span><span>   </span><span class="annot"><a href="#local-6989586621679257398"><span class="hs-identifier hs-type">typeName</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-type">ChoiceDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257396"><span class="hs-identifier hs-type">fieldName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-comment">-- | A reference to a primitive type.</span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DSimple"><span class="annot"><a href="Mu.Schema.Definition.html#DSimple"><span class="hs-identifier hs-var">DSimple</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257397"><span class="hs-identifier hs-type">builtin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257398"><span class="hs-identifier hs-type">typeName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-comment">-- | Defines each of the choices in an enumeration.</span><span>
</span><span id="line-101"></span><span class="hs-keyword">newtype</span><span> </span><span id="ChoiceDef"><span class="annot"><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-var">ChoiceDef</span></a></span></span><span> </span><span id="local-6989586621679257360"><span class="annot"><a href="#local-6989586621679257360"><span class="hs-identifier hs-type">fieldName</span></a></span></span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | One single choice from an enumeration.</span><span>
</span><span id="line-103"></span><span>    </span><span id="ChoiceDef"><span class="annot"><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-var">ChoiceDef</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679257360"><span class="hs-identifier hs-type">fieldName</span></a></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-comment">-- | Defines a field in a record</span><span>
</span><span id="line-106"></span><span class="hs-comment">--   by a name and the corresponding type.</span><span>
</span><span id="line-107"></span><span class="hs-keyword">type</span><span> </span><span id="FieldDef"><span class="annot"><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier hs-var">FieldDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#FieldDefB"><span class="hs-identifier hs-type">FieldDefB</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-108"></span><span class="hs-comment">-- | Defines a field in a record,</span><span>
</span><span id="line-109"></span><span class="hs-comment">--   parametric on type representations.</span><span>
</span><span id="line-110"></span><span class="hs-keyword">data</span><span> </span><span id="FieldDefB"><span class="annot"><a href="Mu.Schema.Definition.html#FieldDefB"><span class="hs-identifier hs-var">FieldDefB</span></a></span></span><span> </span><span id="local-6989586621679257366"><span class="annot"><a href="#local-6989586621679257366"><span class="hs-identifier hs-type">builtin</span></a></span></span><span> </span><span id="local-6989586621679257365"><span class="annot"><a href="#local-6989586621679257365"><span class="hs-identifier hs-type">typeName</span></a></span></span><span> </span><span id="local-6989586621679257367"><span class="annot"><a href="#local-6989586621679257367"><span class="hs-identifier hs-type">fieldName</span></a></span></span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | One single field in a record.</span><span>
</span><span id="line-112"></span><span>    </span><span id="FieldDef"><span class="annot"><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier hs-var">FieldDef</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679257367"><span class="hs-identifier hs-type">fieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257366"><span class="hs-identifier hs-type">builtin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257365"><span class="hs-identifier hs-type">typeName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="hs-comment">-- | Types of fields of a record.</span><span>
</span><span id="line-115"></span><span class="hs-comment">--   References to other types in the same schema</span><span>
</span><span id="line-116"></span><span class="hs-comment">--   are done via the 'TSchematic' constructor.</span><span>
</span><span id="line-117"></span><span class="hs-keyword">type</span><span> </span><span id="FieldType"><span class="annot"><a href="Mu.Schema.Definition.html#FieldType"><span class="hs-identifier hs-var">FieldType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-118"></span><span class="hs-comment">-- | Types of fields of a record,</span><span>
</span><span id="line-119"></span><span class="hs-comment">--   parametric on type representations.</span><span>
</span><span id="line-120"></span><span class="hs-keyword">data</span><span> </span><span id="FieldTypeB"><span class="annot"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-var">FieldTypeB</span></a></span></span><span> </span><span id="local-6989586621679257357"><span class="annot"><a href="#local-6989586621679257357"><span class="hs-identifier hs-type">builtin</span></a></span></span><span> </span><span id="local-6989586621679257356"><span class="annot"><a href="#local-6989586621679257356"><span class="hs-identifier hs-type">typeName</span></a></span></span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Null, as found in Avro.</span><span>
</span><span id="line-122"></span><span>    </span><span id="TNull"><span class="annot"><a href="Mu.Schema.Definition.html#TNull"><span class="hs-identifier hs-var">TNull</span></a></span></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-comment">-- | Reference to a primitive type, such as integers or Booleans.</span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-comment">--   The set of supported primitive types depends on the protocol.</span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TPrimitive"><span class="annot"><a href="Mu.Schema.Definition.html#TPrimitive"><span class="hs-identifier hs-var">TPrimitive</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679257357"><span class="hs-identifier hs-type">builtin</span></a></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-comment">-- | Reference to another type in the schema.</span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TSchematic"><span class="annot"><a href="Mu.Schema.Definition.html#TSchematic"><span class="hs-identifier hs-var">TSchematic</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679257356"><span class="hs-identifier hs-type">typeName</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-comment">-- |&#160;Optional value.</span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TOption"><span class="annot"><a href="Mu.Schema.Definition.html#TOption"><span class="hs-identifier hs-var">TOption</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257357"><span class="hs-identifier hs-type">builtin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257356"><span class="hs-identifier hs-type">typeName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-comment">-- |&#160;List of values.</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-glyph">|</span><span>&#160;</span><span id="TList"><span class="annot"><a href="Mu.Schema.Definition.html#TList"><span class="hs-identifier hs-var">TList</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257357"><span class="hs-identifier hs-type">builtin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257356"><span class="hs-identifier hs-type">typeName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-comment">-- | Map of values.</span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-comment">--   The set of supported key types depends on the protocol.</span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TMap"><span class="annot"><a href="Mu.Schema.Definition.html#TMap"><span class="hs-identifier hs-var">TMap</span></a></span></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257357"><span class="hs-identifier hs-type">builtin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257356"><span class="hs-identifier hs-type">typeName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257357"><span class="hs-identifier hs-type">builtin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257356"><span class="hs-identifier hs-type">typeName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-comment">-- | Represents a choice between types.</span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TUnion"><span class="annot"><a href="Mu.Schema.Definition.html#TUnion"><span class="hs-identifier hs-var">TUnion</span></a></span></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257357"><span class="hs-identifier hs-type">builtin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257356"><span class="hs-identifier hs-type">typeName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span id="local-6989586621679257292"><span id="local-6989586621679257293"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257293"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#DRecord"><span class="hs-identifier hs-type">DRecord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257293"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257292"><span class="hs-identifier hs-type">fields</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-139"></span><span>  </span><span id="local-6989586621679257290"><span class="annot"><span class="annottext">nameVal :: proxy ('DRecord n fields) -&gt; String
</span><a href="#local-6989586621679257290"><span class="hs-identifier hs-var hs-var hs-var hs-var">nameVal</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy n -&gt; String
forall k (a :: k) (proxy :: k -&gt; *).
KnownName a =&gt;
proxy a -&gt; String
</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy n
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257293"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-140"></span><span id="local-6989586621679257287"><span id="local-6989586621679257288"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257288"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#DEnum"><span class="hs-identifier hs-type">DEnum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257288"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257287"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-141"></span><span>  </span><span id="local-6989586621679257285"><span class="annot"><span class="annottext">nameVal :: proxy ('DEnum n choices) -&gt; String
</span><a href="#local-6989586621679257285"><span class="hs-identifier hs-var hs-var hs-var hs-var">nameVal</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy n -&gt; String
forall k (a :: k) (proxy :: k -&gt; *).
KnownName a =&gt;
proxy a -&gt; String
</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy n
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257288"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-142"></span><span id="local-6989586621679257284"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257284"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-type">ChoiceDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257284"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-143"></span><span>  </span><span id="local-6989586621679257282"><span class="annot"><span class="annottext">nameVal :: proxy ('ChoiceDef n) -&gt; String
</span><a href="#local-6989586621679257282"><span class="hs-identifier hs-var hs-var hs-var hs-var">nameVal</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy n -&gt; String
forall k (a :: k) (proxy :: k -&gt; *).
KnownName a =&gt;
proxy a -&gt; String
</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy n
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257284"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-144"></span><span id="local-6989586621679257280"><span id="local-6989586621679257281"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257281"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257281"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257280"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-145"></span><span>  </span><span id="local-6989586621679257278"><span class="annot"><span class="annottext">nameVal :: proxy ('FieldDef n t) -&gt; String
</span><a href="#local-6989586621679257278"><span class="hs-identifier hs-var hs-var hs-var hs-var">nameVal</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy n -&gt; String
forall k (a :: k) (proxy :: k -&gt; *).
KnownName a =&gt;
proxy a -&gt; String
</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy n
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257281"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="hs-comment">-- | Lookup a type in a schema by its name.</span><span>
</span><span id="line-148"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257277"><span class="annot"><a href="#local-6989586621679257277"><span class="hs-identifier hs-type">sch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#Schema"><span class="hs-identifier hs-type">Schema</span></a></span><span> </span><span id="local-6989586621679257276"><span class="annot"><a href="#local-6989586621679257276"><span class="hs-identifier hs-type hs-type">t</span></a></span></span><span> </span><span id="local-6989586621679257275"><span class="annot"><a href="#local-6989586621679257275"><span class="hs-identifier hs-type hs-type">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="%3A%2F%3A"><span class="annot"><a href="Mu.Schema.Definition.html#%3A%2F%3A"><span class="hs-operator hs-var">:/:</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257274"><span class="annot"><a href="#local-6989586621679257274"><span class="hs-identifier hs-type">name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679257276"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#TypeDef"><span class="hs-identifier hs-type">TypeDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257276"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257275"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="%3A%2F%3A"><span class="annot"><a href="Mu.Schema.Definition.html#%3A%2F%3A"><span class="hs-operator hs-var">:/:</span></a></span></span><span> </span><span id="local-6989586621679257273"><span class="annot"><a href="#local-6989586621679257273"><span class="hs-identifier hs-type hs-type">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeError</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Cannot find type &quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">ShowType</span></span><span> </span><span class="annot"><a href="#local-6989586621679257273"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot; in the schema&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#DRecord"><span class="hs-identifier hs-type">DRecord</span></a></span><span> </span><span id="local-6989586621679257272"><span class="annot"><a href="#local-6989586621679257272"><span class="hs-identifier hs-type hs-type">name</span></a></span></span><span> </span><span id="local-6989586621679257271"><span class="annot"><a href="#local-6989586621679257271"><span class="hs-identifier hs-type hs-type">fields</span></a></span></span><span>  </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span id="local-6989586621679257270"><span class="annot"><a href="#local-6989586621679257270"><span class="hs-identifier hs-type hs-type">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span id="%3A%2F%3A"><span class="annot"><a href="Mu.Schema.Definition.html#%3A%2F%3A"><span class="hs-operator hs-var">:/:</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679257272"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#DRecord"><span class="hs-identifier hs-type">DRecord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257272"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257271"><span class="hs-identifier hs-type">fields</span></a></span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#DEnum"><span class="hs-identifier hs-type">DEnum</span></a></span><span>   </span><span id="local-6989586621679257269"><span class="annot"><a href="#local-6989586621679257269"><span class="hs-identifier hs-type hs-type">name</span></a></span></span><span> </span><span id="local-6989586621679257268"><span class="annot"><a href="#local-6989586621679257268"><span class="hs-identifier hs-type hs-type">choices</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span id="local-6989586621679257267"><span class="annot"><a href="#local-6989586621679257267"><span class="hs-identifier hs-type hs-type">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span id="%3A%2F%3A"><span class="annot"><a href="Mu.Schema.Definition.html#%3A%2F%3A"><span class="hs-operator hs-var">:/:</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679257269"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#DEnum"><span class="hs-identifier hs-type">DEnum</span></a></span><span>   </span><span class="annot"><a href="#local-6989586621679257269"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257268"><span class="hs-identifier hs-type">choices</span></a></span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679257266"><span class="annot"><a href="#local-6989586621679257266"><span class="hs-identifier hs-type hs-type">other</span></a></span></span><span>                 </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span id="local-6989586621679257265"><span class="annot"><a href="#local-6989586621679257265"><span class="hs-identifier hs-type hs-type">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span id="%3A%2F%3A"><span class="annot"><a href="Mu.Schema.Definition.html#%3A%2F%3A"><span class="hs-operator hs-var">:/:</span></a></span></span><span> </span><span id="local-6989586621679257264"><span class="annot"><a href="#local-6989586621679257264"><span class="hs-identifier hs-type hs-type">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679257265"><span class="hs-identifier hs-type">rest</span></a></span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#%3A%2F%3A"><span class="hs-operator hs-type">:/:</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257264"><span class="hs-identifier hs-type">name</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-comment">-- | Defines a mapping between two elements.</span><span>
</span><span id="line-155"></span><span class="hs-keyword">data</span><span> </span><span id="Mapping"><span class="annot"><a href="Mu.Schema.Definition.html#Mapping"><span class="hs-identifier hs-var">Mapping</span></a></span></span><span>  </span><span id="local-6989586621679257263"><span class="annot"><a href="#local-6989586621679257263"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679257262"><span class="annot"><a href="#local-6989586621679257262"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679257263"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span id="%3A-%3E"><span class="annot"><a href="Mu.Schema.Definition.html#%3A-%3E"><span class="hs-operator hs-var">:-&gt;</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679257262"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-156"></span><span class="hs-comment">-- | Defines a set of mappings between elements of @a@ and @b@.</span><span>
</span><span id="line-157"></span><span class="hs-keyword">type</span><span> </span><span id="Mappings"><span class="annot"><a href="Mu.Schema.Definition.html#Mappings"><span class="hs-identifier hs-var">Mappings</span></a></span></span><span> </span><span id="local-6989586621679257260"><span class="annot"><a href="#local-6989586621679257260"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679257259"><span class="annot"><a href="#local-6989586621679257259"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Mu.Schema.Definition.html#Mapping"><span class="hs-identifier hs-type">Mapping</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257260"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257259"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-comment">-- | Finds the corresponding right value of @v@</span><span>
</span><span id="line-160"></span><span class="hs-comment">--   in a mapping @ms@. When the kinds are 'Symbol',</span><span>
</span><span id="line-161"></span><span class="hs-comment">--   return the same value if not found.</span><span>
</span><span id="line-162"></span><span class="hs-comment">--   When the return type is 'Type', return ' ()'</span><span>
</span><span id="line-163"></span><span class="hs-comment">--   if the value is not found.</span><span>
</span><span id="line-164"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="MappingRight"><span class="annot"><a href="Mu.Schema.Definition.html#MappingRight"><span class="hs-identifier hs-var">MappingRight</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257258"><span class="annot"><a href="#local-6989586621679257258"><span class="hs-identifier hs-type">ms</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#Mappings"><span class="hs-identifier hs-type">Mappings</span></a></span><span> </span><span id="local-6989586621679257257"><span class="annot"><a href="#local-6989586621679257257"><span class="hs-identifier hs-type hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679257256"><span class="annot"><a href="#local-6989586621679257256"><span class="hs-identifier hs-type hs-type">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257255"><span class="annot"><a href="#local-6989586621679257255"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679257257"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679257256"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-165"></span><span>  </span><span id="MappingRight"><span class="annot"><a href="Mu.Schema.Definition.html#MappingRight"><span class="hs-identifier hs-var">MappingRight</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257254"><span class="annot"><a href="#local-6989586621679257254"><span class="hs-identifier hs-type hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679257254"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>  </span><span id="MappingRight"><span class="annot"><a href="Mu.Schema.Definition.html#MappingRight"><span class="hs-identifier hs-var">MappingRight</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257253"><span class="annot"><a href="#local-6989586621679257253"><span class="hs-identifier hs-type hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>  </span><span id="MappingRight"><span class="annot"><a href="Mu.Schema.Definition.html#MappingRight"><span class="hs-identifier hs-var">MappingRight</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621679257252"><span class="annot"><a href="#local-6989586621679257252"><span class="hs-identifier hs-type hs-type">v</span></a></span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeError</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Cannot find value &quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">ShowType</span></span><span> </span><span class="annot"><a href="#local-6989586621679257252"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>  </span><span id="MappingRight"><span class="annot"><a href="Mu.Schema.Definition.html#MappingRight"><span class="hs-identifier hs-var">MappingRight</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679257251"><span class="annot"><a href="#local-6989586621679257251"><span class="hs-identifier hs-type hs-type">x</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:-&gt;</span><span> </span><span id="local-6989586621679257250"><span class="annot"><a href="#local-6989586621679257250"><span class="hs-identifier hs-type hs-type">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span id="local-6989586621679257249"><span class="annot"><a href="#local-6989586621679257249"><span class="hs-identifier hs-type hs-type">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679257251"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679257250"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-169"></span><span>  </span><span id="MappingRight"><span class="annot"><a href="Mu.Schema.Definition.html#MappingRight"><span class="hs-identifier hs-var">MappingRight</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257248"><span class="annot"><a href="#local-6989586621679257248"><span class="hs-identifier hs-type hs-type">other</span></a></span></span><span>      </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span id="local-6989586621679257247"><span class="annot"><a href="#local-6989586621679257247"><span class="hs-identifier hs-type hs-type">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679257246"><span class="annot"><a href="#local-6989586621679257246"><span class="hs-identifier hs-type hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#MappingRight"><span class="hs-identifier hs-type">MappingRight</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257247"><span class="hs-identifier hs-type">rest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257246"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-comment">-- | Finds the corresponding left value of @v@</span><span>
</span><span id="line-172"></span><span class="hs-comment">--   in a mapping @ms@. When the kinds are 'Symbol',</span><span>
</span><span id="line-173"></span><span class="hs-comment">--   return the same value if not found.</span><span>
</span><span id="line-174"></span><span class="hs-comment">--   When the return type is 'Type', return ' ()'</span><span>
</span><span id="line-175"></span><span class="hs-comment">--   if the value is not found.</span><span>
</span><span id="line-176"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="MappingLeft"><span class="annot"><a href="Mu.Schema.Definition.html#MappingLeft"><span class="hs-identifier hs-var">MappingLeft</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257245"><span class="annot"><a href="#local-6989586621679257245"><span class="hs-identifier hs-type">ms</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#Mappings"><span class="hs-identifier hs-type">Mappings</span></a></span><span> </span><span id="local-6989586621679257244"><span class="annot"><a href="#local-6989586621679257244"><span class="hs-identifier hs-type hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679257243"><span class="annot"><a href="#local-6989586621679257243"><span class="hs-identifier hs-type hs-type">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257242"><span class="annot"><a href="#local-6989586621679257242"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679257243"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679257244"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-177"></span><span>  </span><span id="MappingLeft"><span class="annot"><a href="Mu.Schema.Definition.html#MappingLeft"><span class="hs-identifier hs-var">MappingLeft</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257241"><span class="annot"><a href="#local-6989586621679257241"><span class="hs-identifier hs-type hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679257241"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>  </span><span id="MappingLeft"><span class="annot"><a href="Mu.Schema.Definition.html#MappingLeft"><span class="hs-identifier hs-var">MappingLeft</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257240"><span class="annot"><a href="#local-6989586621679257240"><span class="hs-identifier hs-type hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>  </span><span id="MappingLeft"><span class="annot"><a href="Mu.Schema.Definition.html#MappingLeft"><span class="hs-identifier hs-var">MappingLeft</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621679257239"><span class="annot"><a href="#local-6989586621679257239"><span class="hs-identifier hs-type hs-type">v</span></a></span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeError</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Cannot find value &quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">ShowType</span></span><span> </span><span class="annot"><a href="#local-6989586621679257239"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>  </span><span id="MappingLeft"><span class="annot"><a href="Mu.Schema.Definition.html#MappingLeft"><span class="hs-identifier hs-var">MappingLeft</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679257238"><span class="annot"><a href="#local-6989586621679257238"><span class="hs-identifier hs-type hs-type">x</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:-&gt;</span><span> </span><span id="local-6989586621679257237"><span class="annot"><a href="#local-6989586621679257237"><span class="hs-identifier hs-type hs-type">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span id="local-6989586621679257236"><span class="annot"><a href="#local-6989586621679257236"><span class="hs-identifier hs-type hs-type">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679257237"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679257238"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-181"></span><span>  </span><span id="MappingLeft"><span class="annot"><a href="Mu.Schema.Definition.html#MappingLeft"><span class="hs-identifier hs-var">MappingLeft</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257235"><span class="annot"><a href="#local-6989586621679257235"><span class="hs-identifier hs-type hs-type">other</span></a></span></span><span>      </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span id="local-6989586621679257234"><span class="annot"><a href="#local-6989586621679257234"><span class="hs-identifier hs-type hs-type">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679257233"><span class="annot"><a href="#local-6989586621679257233"><span class="hs-identifier hs-type hs-type">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#MappingLeft"><span class="hs-identifier hs-type">MappingLeft</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257234"><span class="hs-identifier hs-type">rest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257233"><span class="hs-identifier hs-type">y</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-keyword">class</span><span> </span><span id="ReflectSchema"><span class="annot"><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-var">ReflectSchema</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257406"><span class="annot"><a href="#local-6989586621679257406"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#Schema"><span class="hs-identifier hs-type">Schema</span></a></span><span> </span><span id="local-6989586621679257408"><span class="annot"><a href="#local-6989586621679257408"><span class="hs-identifier hs-type hs-type">tn</span></a></span></span><span> </span><span id="local-6989586621679257407"><span class="annot"><a href="#local-6989586621679257407"><span class="hs-identifier hs-type hs-type">fn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-comment">-- | Reflect a schema into term-level.</span><span>
</span><span id="line-185"></span><span>  </span><span id="reflectSchema"><span class="annot"><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier hs-type">reflectSchema</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679257406"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#SchemaB"><span class="hs-identifier hs-type">SchemaB</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeRep</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-186"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span>&#160;</span><span class="hs-keyword">where</span><span>
</span><span id="line-187"></span><span>  </span><span id="local-6989586621679257230"><span class="annot"><span class="annottext">reflectSchema :: Proxy '[] -&gt; SchemaB TypeRep String String
</span><a href="#local-6989586621679257230"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectSchema</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-188"></span><span id="local-6989586621679257227"><span id="local-6989586621679257228"><span id="local-6989586621679257229"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFields"><span class="hs-identifier hs-type">ReflectFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257229"><span class="hs-identifier hs-type">fields</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257228"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257227"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#DRecord"><span class="hs-identifier hs-type">DRecord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257228"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257229"><span class="hs-identifier hs-type">fields</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679257227"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-190"></span><span>  </span><span id="local-6989586621679257225"><span class="annot"><span class="annottext">reflectSchema :: Proxy ('DRecord name fields : s) -&gt; SchemaB TypeRep String String
</span><a href="#local-6989586621679257225"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectSchema</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; [FieldDefB TypeRep String String]
-&gt; TypeDefB TypeRep String String
forall builtin typeName fieldName.
typeName
-&gt; [FieldDefB builtin typeName fieldName]
-&gt; TypeDefB builtin typeName fieldName
</span><a href="Mu.Schema.Definition.html#DRecord"><span class="hs-identifier hs-var">DRecord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name -&gt; String
forall k (a :: k) (proxy :: k -&gt; *).
KnownName a =&gt;
proxy a -&gt; String
</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257228"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy fields -&gt; [FieldDefB TypeRep String String]
forall tn fn (fs :: [FieldDef tn fn]).
ReflectFields fs =&gt;
Proxy fs -&gt; [FieldDefB TypeRep String String]
</span><a href="Mu.Schema.Definition.html#reflectFields"><span class="hs-identifier hs-var">reflectFields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy fields
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257229"><span class="hs-identifier hs-type">fields</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>                  </span><span class="annot"><span class="annottext">TypeDefB TypeRep String String
-&gt; SchemaB TypeRep String String -&gt; SchemaB TypeRep String String
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Proxy s -&gt; SchemaB TypeRep String String
forall tn fn (s :: Schema tn fn).
ReflectSchema s =&gt;
Proxy s -&gt; SchemaB TypeRep String String
</span><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier hs-var">reflectSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy s
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257227"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-192"></span><span id="local-6989586621679257222"><span id="local-6989586621679257223"><span id="local-6989586621679257224"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectChoices"><span class="hs-identifier hs-type">ReflectChoices</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257224"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257223"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257222"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#DEnum"><span class="hs-identifier hs-type">DEnum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257223"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257224"><span class="hs-identifier hs-type">choices</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679257222"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-194"></span><span>  </span><span id="local-6989586621679257220"><span class="annot"><span class="annottext">reflectSchema :: Proxy ('DEnum name choices : s) -&gt; SchemaB TypeRep String String
</span><a href="#local-6989586621679257220"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectSchema</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; [ChoiceDef String] -&gt; TypeDefB TypeRep String String
forall builtin typeName fieldName.
typeName
-&gt; [ChoiceDef fieldName] -&gt; TypeDefB builtin typeName fieldName
</span><a href="Mu.Schema.Definition.html#DEnum"><span class="hs-identifier hs-var">DEnum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name -&gt; String
forall k (a :: k) (proxy :: k -&gt; *).
KnownName a =&gt;
proxy a -&gt; String
</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257223"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy choices -&gt; [ChoiceDef String]
forall fn (cs :: [ChoiceDef fn]).
ReflectChoices cs =&gt;
Proxy cs -&gt; [ChoiceDef String]
</span><a href="Mu.Schema.Definition.html#reflectChoices"><span class="hs-identifier hs-var">reflectChoices</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy choices
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257224"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>                  </span><span class="annot"><span class="annottext">TypeDefB TypeRep String String
-&gt; SchemaB TypeRep String String -&gt; SchemaB TypeRep String String
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Proxy s -&gt; SchemaB TypeRep String String
forall tn fn (s :: Schema tn fn).
ReflectSchema s =&gt;
Proxy s -&gt; SchemaB TypeRep String String
</span><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier hs-var">reflectSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy s
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257222"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-196"></span><span id="local-6989586621679257218"><span id="local-6989586621679257219"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257219"><span class="hs-identifier hs-type">ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257218"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#DSimple"><span class="hs-identifier hs-type">DSimple</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257219"><span class="hs-identifier hs-type">ty</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679257218"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-198"></span><span>  </span><span id="local-6989586621679257216"><span class="annot"><span class="annottext">reflectSchema :: Proxy ('DSimple ty : s) -&gt; SchemaB TypeRep String String
</span><a href="#local-6989586621679257216"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectSchema</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldTypeB TypeRep String -&gt; TypeDefB TypeRep String String
forall builtin typeName fieldName.
FieldTypeB builtin typeName -&gt; TypeDefB builtin typeName fieldName
</span><a href="Mu.Schema.Definition.html#DSimple"><span class="hs-identifier hs-var">DSimple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ty -&gt; FieldTypeB TypeRep String
forall tn (ty :: FieldType tn).
ReflectFieldType ty =&gt;
Proxy ty -&gt; FieldTypeB TypeRep String
</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ty
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257219"><span class="hs-identifier hs-type">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>                  </span><span class="annot"><span class="annottext">TypeDefB TypeRep String String
-&gt; SchemaB TypeRep String String -&gt; SchemaB TypeRep String String
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Proxy s -&gt; SchemaB TypeRep String String
forall tn fn (s :: Schema tn fn).
ReflectSchema s =&gt;
Proxy s -&gt; SchemaB TypeRep String String
</span><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier hs-var">reflectSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy s
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257218"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-keyword">class</span><span> </span><span id="ReflectFields"><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFields"><span class="hs-identifier hs-var">ReflectFields</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257393"><span class="annot"><a href="#local-6989586621679257393"><span class="hs-identifier hs-type">fs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span> </span><span id="local-6989586621679257395"><span class="annot"><a href="#local-6989586621679257395"><span class="hs-identifier hs-type hs-type">tn</span></a></span></span><span> </span><span id="local-6989586621679257394"><span class="annot"><a href="#local-6989586621679257394"><span class="hs-identifier hs-type hs-type">fn</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-comment">-- | Reflect a list of fields into term-level.</span><span>
</span><span id="line-203"></span><span>  </span><span id="reflectFields"><span class="annot"><a href="Mu.Schema.Definition.html#reflectFields"><span class="hs-identifier hs-type">reflectFields</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679257393"><span class="hs-identifier hs-type">fs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldDefB"><span class="hs-identifier hs-type">FieldDefB</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeRep</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-204"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFields"><span class="hs-identifier hs-type">ReflectFields</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-205"></span><span>  </span><span id="local-6989586621679257213"><span class="annot"><span class="annottext">reflectFields :: Proxy '[] -&gt; [FieldDefB TypeRep String String]
</span><a href="#local-6989586621679257213"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectFields</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-206"></span><span id="local-6989586621679257210"><span id="local-6989586621679257211"><span id="local-6989586621679257212"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257212"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257211"><span class="hs-identifier hs-type">ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFields"><span class="hs-identifier hs-type">ReflectFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257210"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFields"><span class="hs-identifier hs-type">ReflectFields</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257212"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257211"><span class="hs-identifier hs-type">ty</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679257210"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-208"></span><span>  </span><span id="local-6989586621679257208"><span class="annot"><span class="annottext">reflectFields :: Proxy ('FieldDef name ty : fs) -&gt; [FieldDefB TypeRep String String]
</span><a href="#local-6989586621679257208"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectFields</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; FieldTypeB TypeRep String -&gt; FieldDefB TypeRep String String
forall builtin typeName fieldName.
fieldName
-&gt; FieldTypeB builtin typeName
-&gt; FieldDefB builtin typeName fieldName
</span><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier hs-var">FieldDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name -&gt; String
forall k (a :: k) (proxy :: k -&gt; *).
KnownName a =&gt;
proxy a -&gt; String
</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257212"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ty -&gt; FieldTypeB TypeRep String
forall tn (ty :: FieldType tn).
ReflectFieldType ty =&gt;
Proxy ty -&gt; FieldTypeB TypeRep String
</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ty
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257211"><span class="hs-identifier hs-type">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>                  </span><span class="annot"><span class="annottext">FieldDefB TypeRep String String
-&gt; [FieldDefB TypeRep String String]
-&gt; [FieldDefB TypeRep String String]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Proxy fs -&gt; [FieldDefB TypeRep String String]
forall tn fn (fs :: [FieldDef tn fn]).
ReflectFields fs =&gt;
Proxy fs -&gt; [FieldDefB TypeRep String String]
</span><a href="Mu.Schema.Definition.html#reflectFields"><span class="hs-identifier hs-var">reflectFields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy fs
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257210"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="hs-keyword">class</span><span> </span><span id="ReflectChoices"><span class="annot"><a href="Mu.Schema.Definition.html#ReflectChoices"><span class="hs-identifier hs-var">ReflectChoices</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257384"><span class="annot"><a href="#local-6989586621679257384"><span class="hs-identifier hs-type">cs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-type">ChoiceDef</span></a></span><span> </span><span id="local-6989586621679257385"><span class="annot"><a href="#local-6989586621679257385"><span class="hs-identifier hs-type hs-type">fn</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-comment">-- | Reflect a list of enumeration choices into term-level.</span><span>
</span><span id="line-213"></span><span>  </span><span id="reflectChoices"><span class="annot"><a href="Mu.Schema.Definition.html#reflectChoices"><span class="hs-identifier hs-type">reflectChoices</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679257384"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-type">ChoiceDef</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-214"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectChoices"><span class="hs-identifier hs-type">ReflectChoices</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-215"></span><span>  </span><span id="local-6989586621679257205"><span class="annot"><span class="annottext">reflectChoices :: Proxy '[] -&gt; [ChoiceDef String]
</span><a href="#local-6989586621679257205"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectChoices</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-216"></span><span id="local-6989586621679257203"><span id="local-6989586621679257204"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257204"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectChoices"><span class="hs-identifier hs-type">ReflectChoices</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257203"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectChoices"><span class="hs-identifier hs-type">ReflectChoices</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-type">ChoiceDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257204"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679257203"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>  </span><span id="local-6989586621679257201"><span class="annot"><span class="annottext">reflectChoices :: Proxy ('ChoiceDef name : cs) -&gt; [ChoiceDef String]
</span><a href="#local-6989586621679257201"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectChoices</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ChoiceDef String
forall fieldName. fieldName -&gt; ChoiceDef fieldName
</span><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-var">ChoiceDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name -&gt; String
forall k (a :: k) (proxy :: k -&gt; *).
KnownName a =&gt;
proxy a -&gt; String
</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257204"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>                   </span><span class="annot"><span class="annottext">ChoiceDef String -&gt; [ChoiceDef String] -&gt; [ChoiceDef String]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Proxy cs -&gt; [ChoiceDef String]
forall fn (cs :: [ChoiceDef fn]).
ReflectChoices cs =&gt;
Proxy cs -&gt; [ChoiceDef String]
</span><a href="Mu.Schema.Definition.html#reflectChoices"><span class="hs-identifier hs-var">reflectChoices</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy cs
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257203"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span class="hs-keyword">class</span><span> </span><span id="ReflectFieldType"><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-var">ReflectFieldType</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257375"><span class="annot"><a href="#local-6989586621679257375"><span class="hs-identifier hs-type">ty</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span> </span><span id="local-6989586621679257376"><span class="annot"><a href="#local-6989586621679257376"><span class="hs-identifier hs-type hs-type">tn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-222"></span><span>  </span><span class="hs-comment">-- | Reflect a schema type into term-level.</span><span>
</span><span id="line-223"></span><span>  </span><span id="reflectFieldType"><span class="annot"><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-type">reflectFieldType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679257375"><span class="hs-identifier hs-type">ty</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeRep</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-224"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#TNull"><span class="hs-identifier hs-type">TNull</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-225"></span><span>  </span><span id="local-6989586621679257198"><span class="annot"><span class="annottext">reflectFieldType :: Proxy 'TNull -&gt; FieldTypeB TypeRep String
</span><a href="#local-6989586621679257198"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectFieldType</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldTypeB TypeRep String
forall builtin typeName. FieldTypeB builtin typeName
</span><a href="Mu.Schema.Definition.html#TNull"><span class="hs-identifier hs-var">TNull</span></a></span><span>
</span><span id="line-226"></span><span id="local-6989586621679257197"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679257197"><span class="hs-identifier hs-type">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#TPrimitive"><span class="hs-identifier hs-type">TPrimitive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257197"><span class="hs-identifier hs-type">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-227"></span><span>  </span><span id="local-6989586621679257195"><span class="annot"><span class="annottext">reflectFieldType :: Proxy ('TPrimitive ty) -&gt; FieldTypeB TypeRep String
</span><a href="#local-6989586621679257195"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectFieldType</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; FieldTypeB TypeRep String
forall builtin typeName. builtin -&gt; FieldTypeB builtin typeName
</span><a href="Mu.Schema.Definition.html#TPrimitive"><span class="hs-identifier hs-var">TPrimitive</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ty -&gt; TypeRep
forall k (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ty
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257197"><span class="hs-identifier hs-type">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-228"></span><span id="local-6989586621679257193"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257193"><span class="hs-identifier hs-type">nm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#TSchematic"><span class="hs-identifier hs-type">TSchematic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257193"><span class="hs-identifier hs-type">nm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-229"></span><span>  </span><span id="local-6989586621679257191"><span class="annot"><span class="annottext">reflectFieldType :: Proxy ('TSchematic nm) -&gt; FieldTypeB TypeRep String
</span><a href="#local-6989586621679257191"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectFieldType</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; FieldTypeB TypeRep String
forall builtin typeName. typeName -&gt; FieldTypeB builtin typeName
</span><a href="Mu.Schema.Definition.html#TSchematic"><span class="hs-identifier hs-var">TSchematic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy nm -&gt; String
forall k (a :: k) (proxy :: k -&gt; *).
KnownName a =&gt;
proxy a -&gt; String
</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy nm
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257193"><span class="hs-identifier hs-type">nm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-230"></span><span id="local-6989586621679257190"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257190"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#TOption"><span class="hs-identifier hs-type">TOption</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257190"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-231"></span><span>  </span><span id="local-6989586621679257188"><span class="annot"><span class="annottext">reflectFieldType :: Proxy ('TOption t) -&gt; FieldTypeB TypeRep String
</span><a href="#local-6989586621679257188"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectFieldType</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldTypeB TypeRep String -&gt; FieldTypeB TypeRep String
forall builtin typeName.
FieldTypeB builtin typeName -&gt; FieldTypeB builtin typeName
</span><a href="Mu.Schema.Definition.html#TOption"><span class="hs-identifier hs-var">TOption</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy t -&gt; FieldTypeB TypeRep String
forall tn (ty :: FieldType tn).
ReflectFieldType ty =&gt;
Proxy ty -&gt; FieldTypeB TypeRep String
</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy t
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257190"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-232"></span><span id="local-6989586621679257187"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257187"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#TList"><span class="hs-identifier hs-type">TList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257187"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-233"></span><span>  </span><span id="local-6989586621679257185"><span class="annot"><span class="annottext">reflectFieldType :: Proxy ('TList t) -&gt; FieldTypeB TypeRep String
</span><a href="#local-6989586621679257185"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectFieldType</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldTypeB TypeRep String -&gt; FieldTypeB TypeRep String
forall builtin typeName.
FieldTypeB builtin typeName -&gt; FieldTypeB builtin typeName
</span><a href="Mu.Schema.Definition.html#TList"><span class="hs-identifier hs-var">TList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy t -&gt; FieldTypeB TypeRep String
forall tn (ty :: FieldType tn).
ReflectFieldType ty =&gt;
Proxy ty -&gt; FieldTypeB TypeRep String
</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy t
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257187"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-234"></span><span id="local-6989586621679257183"><span id="local-6989586621679257184"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257184"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257183"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#TMap"><span class="hs-identifier hs-type">TMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257184"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257183"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>  </span><span id="local-6989586621679257181"><span class="annot"><span class="annottext">reflectFieldType :: Proxy ('TMap k v) -&gt; FieldTypeB TypeRep String
</span><a href="#local-6989586621679257181"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectFieldType</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldTypeB TypeRep String
-&gt; FieldTypeB TypeRep String -&gt; FieldTypeB TypeRep String
forall builtin typeName.
FieldTypeB builtin typeName
-&gt; FieldTypeB builtin typeName -&gt; FieldTypeB builtin typeName
</span><a href="Mu.Schema.Definition.html#TMap"><span class="hs-identifier hs-var">TMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy k -&gt; FieldTypeB TypeRep String
forall tn (ty :: FieldType tn).
ReflectFieldType ty =&gt;
Proxy ty -&gt; FieldTypeB TypeRep String
</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy k
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257184"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy v -&gt; FieldTypeB TypeRep String
forall tn (ty :: FieldType tn).
ReflectFieldType ty =&gt;
Proxy ty -&gt; FieldTypeB TypeRep String
</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy v
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257183"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-237"></span><span id="local-6989586621679257180"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldTypes"><span class="hs-identifier hs-type">ReflectFieldTypes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257180"><span class="hs-identifier hs-type">ts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Mu.Schema.Definition.html#TUnion"><span class="hs-identifier hs-type">TUnion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257180"><span class="hs-identifier hs-type">ts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-238"></span><span>  </span><span id="local-6989586621679257178"><span class="annot"><span class="annottext">reflectFieldType :: Proxy ('TUnion ts) -&gt; FieldTypeB TypeRep String
</span><a href="#local-6989586621679257178"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectFieldType</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FieldTypeB TypeRep String] -&gt; FieldTypeB TypeRep String
forall builtin typeName.
[FieldTypeB builtin typeName] -&gt; FieldTypeB builtin typeName
</span><a href="Mu.Schema.Definition.html#TUnion"><span class="hs-identifier hs-var">TUnion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ts -&gt; [FieldTypeB TypeRep String]
forall tn (ts :: [FieldType tn]).
ReflectFieldTypes ts =&gt;
Proxy ts -&gt; [FieldTypeB TypeRep String]
</span><a href="Mu.Schema.Definition.html#reflectFieldTypes"><span class="hs-identifier hs-var">reflectFieldTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ts
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257180"><span class="hs-identifier hs-type">ts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-keyword">class</span><span> </span><span id="ReflectFieldTypes"><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldTypes"><span class="hs-identifier hs-var">ReflectFieldTypes</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679257331"><span class="annot"><a href="#local-6989586621679257331"><span class="hs-identifier hs-type">ts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span> </span><span id="local-6989586621679257332"><span class="annot"><a href="#local-6989586621679257332"><span class="hs-identifier hs-type hs-type">tn</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-comment">-- | Reflect a list of schema types into term-level.</span><span>
</span><span id="line-242"></span><span>  </span><span id="reflectFieldTypes"><span class="annot"><a href="Mu.Schema.Definition.html#reflectFieldTypes"><span class="hs-identifier hs-type">reflectFieldTypes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679257331"><span class="hs-identifier hs-type">ts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeRep</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-243"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldTypes"><span class="hs-identifier hs-type">ReflectFieldTypes</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-244"></span><span>  </span><span id="local-6989586621679257175"><span class="annot"><span class="annottext">reflectFieldTypes :: Proxy '[] -&gt; [FieldTypeB TypeRep String]
</span><a href="#local-6989586621679257175"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectFieldTypes</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-245"></span><span id="local-6989586621679257173"><span id="local-6989586621679257174"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257174"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldTypes"><span class="hs-identifier hs-type">ReflectFieldTypes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679257173"><span class="hs-identifier hs-type">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Schema.Definition.html#ReflectFieldTypes"><span class="hs-identifier hs-type">ReflectFieldTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679257174"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679257173"><span class="hs-identifier hs-type">ts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>  </span><span id="local-6989586621679257171"><span class="annot"><span class="annottext">reflectFieldTypes :: Proxy (t : ts) -&gt; [FieldTypeB TypeRep String]
</span><a href="#local-6989586621679257171"><span class="hs-identifier hs-var hs-var hs-var hs-var">reflectFieldTypes</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy t -&gt; FieldTypeB TypeRep String
forall tn (ty :: FieldType tn).
ReflectFieldType ty =&gt;
Proxy ty -&gt; FieldTypeB TypeRep String
</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy t
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257174"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldTypeB TypeRep String
-&gt; [FieldTypeB TypeRep String] -&gt; [FieldTypeB TypeRep String]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Proxy ts -&gt; [FieldTypeB TypeRep String]
forall tn (ts :: [FieldType tn]).
ReflectFieldTypes ts =&gt;
Proxy ts -&gt; [FieldTypeB TypeRep String]
</span><a href="Mu.Schema.Definition.html#reflectFieldTypes"><span class="hs-identifier hs-var">reflectFieldTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ts
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679257173"><span class="hs-identifier hs-type">ts</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-248"></span></pre></body></html>