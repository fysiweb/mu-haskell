<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# language DataKinds           #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# language FlexibleContexts    #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# language GADTs               #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# language OverloadedLists     #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# language OverloadedStrings   #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# language RankNTypes          #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# language ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# language TypeApplications    #-}</span><span>
</span><span id="line-9"></span><span class="hs-comment">{-|
Description : Execute a Mu 'Server' using GraphQL

This module allows you to server a Mu 'Server'
as a WAI 'Application' using GraphQL.

The simples way is to use 'runGraphQLAppQuery'
(if you only provide GraphQL queries) or
'runGraphQLApp' (if you also have mutations
or subscriptions). All other variants provide
more control over the settings.
-}</span><span>
</span><span id="line-21"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Mu.GraphQL.Server</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#GraphQLApp"><span class="hs-identifier">GraphQLApp</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Run an GraphQL resolver directly</span></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.GraphQL.Server.html#runGraphQLApp"><span class="hs-identifier">runGraphQLApp</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.GraphQL.Server.html#runGraphQLAppSettings"><span class="hs-identifier">runGraphQLAppSettings</span></a></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.GraphQL.Server.html#runGraphQLAppQuery"><span class="hs-identifier">runGraphQLAppQuery</span></a></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.GraphQL.Server.html#runGraphQLAppTrans"><span class="hs-identifier">runGraphQLAppTrans</span></a></span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Build a WAI 'Application'</span></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.GraphQL.Server.html#graphQLApp"><span class="hs-identifier">graphQLApp</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.GraphQL.Server.html#graphQLAppQuery"><span class="hs-identifier">graphQLAppQuery</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.GraphQL.Server.html#graphQLAppTrans"><span class="hs-identifier">graphQLAppTrans</span></a></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.GraphQL.Server.html#graphQLAppTransQuery"><span class="hs-identifier">graphQLAppTransQuery</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Lifting of 'Conduit's</span></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.GraphQL.Server.html#liftServerConduit"><span class="hs-identifier">liftServerConduit</span></a></span><span>
</span><span id="line-35"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;|&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">throw</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">join</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runExceptT</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span>                       </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Aeson.Text</span></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">encodeToLazyText</span></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.ByteString.Char8</span></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">split</span></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromStrict</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">toStrict</span></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Conduit</span></span><span>                     </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ConduitT</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">transPipe</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span>              </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HM</span></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Proxy</span></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Proxy</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span>                        </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">decodeUtf8'</span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding.Error</span></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">UnicodeException</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy.Encoding</span></span><span>          </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Language.GraphQL.AST</span></span><span>             </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GQL</span></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.HTTP.Types.Header</span></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">hContentType</span></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.HTTP.Types.Method</span></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">StdMethod</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">parseMethod</span></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.HTTP.Types.Status</span></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ok200</span></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.Wai</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.Wai.Handler.Warp</span></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Port</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Settings</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">run</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runSettings</span></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Network.Wai.Handler.WebSockets</span></span><span>   </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">WS</span></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Network.WebSockets</span></span><span>               </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">WS</span></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Mu.GraphQL.Quasi.LostParser.html"><span class="hs-identifier">Mu.GraphQL.Quasi.LostParser</span></a></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Mu.GraphQL.Quasi.LostParser.html#parseDoc"><span class="hs-identifier">parseDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Mu.GraphQL.Query.Parse.html"><span class="hs-identifier">Mu.GraphQL.Query.Parse</span></a></span><span>           </span><span class="hs-special">(</span><span class="annot"><a href="Mu.GraphQL.Query.Parse.html#VariableMapC"><span class="hs-identifier">VariableMapC</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html"><span class="hs-identifier">Mu.GraphQL.Query.Run</span></a></span><span>             </span><span class="hs-special">(</span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#GraphQLApp"><span class="hs-identifier">GraphQLApp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#runPipeline"><span class="hs-identifier">runPipeline</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#runSubscriptionPipeline"><span class="hs-identifier">runSubscriptionPipeline</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Mu.GraphQL.Subscription.Protocol.html"><span class="hs-identifier">Mu.GraphQL.Subscription.Protocol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.GraphQL.Subscription.Protocol.html#protocol"><span class="hs-identifier">protocol</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Mu.Server</span></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ServerErrorIO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ServerT</span></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-keyword">data</span><span> </span><span id="GraphQLInput"><span class="annot"><a href="Mu.GraphQL.Server.html#GraphQLInput"><span class="hs-identifier hs-var">GraphQLInput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GraphQLInput"><span class="annot"><a href="Mu.GraphQL.Server.html#GraphQLInput"><span class="hs-identifier hs-var">GraphQLInput</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Parse.html#VariableMapC"><span class="hs-identifier hs-type">VariableMapC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679168405"><span class="annot"><span class="hs-identifier hs-type">A.FromJSON</span></span><span> </span><span class="annot"><a href="Mu.GraphQL.Server.html#GraphQLInput"><span class="hs-identifier hs-type">GraphQLInput</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-69"></span><span>  </span><span id="local-6989586621679168403"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser GraphQLInput
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser GraphQLInput) -&gt; Value -&gt; Parser GraphQLInput
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">A.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GraphQLInput&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Object -&gt; Parser GraphQLInput) -&gt; Value -&gt; Parser GraphQLInput)
-&gt; (Object -&gt; Parser GraphQLInput) -&gt; Value -&gt; Parser GraphQLInput
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-70"></span><span>     </span><span class="hs-glyph">\</span><span id="local-6989586621679168400"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679168400"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; VariableMapC -&gt; Maybe Text -&gt; GraphQLInput
</span><a href="Mu.GraphQL.Server.html#GraphQLInput"><span class="hs-identifier hs-var">GraphQLInput</span></a></span><span>
</span><span id="line-71"></span><span>      </span><span class="annot"><span class="annottext">(Text -&gt; VariableMapC -&gt; Maybe Text -&gt; GraphQLInput)
-&gt; Parser Text
-&gt; Parser (VariableMapC -&gt; Maybe Text -&gt; GraphQLInput)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679168400"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">A..:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;query&quot;</span></span><span>
</span><span id="line-72"></span><span>      </span><span class="annot"><span class="annottext">Parser (VariableMapC -&gt; Maybe Text -&gt; GraphQLInput)
-&gt; Parser VariableMapC -&gt; Parser (Maybe Text -&gt; GraphQLInput)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679168400"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser VariableMapC
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">A..:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;variables&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser VariableMapC -&gt; Parser VariableMapC -&gt; Parser VariableMapC
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">VariableMapC -&gt; Parser VariableMapC
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">VariableMapC
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">HM.empty</span></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>      </span><span class="annot"><span class="annottext">Parser (Maybe Text -&gt; GraphQLInput)
-&gt; Parser (Maybe Text) -&gt; Parser GraphQLInput
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679168400"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe Text)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">A..:?</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;operationName&quot;</span></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">-- | Turn a Mu GraphQL 'Server' into a WAI 'Application'.</span><span>
</span><span id="line-76"></span><span class="hs-comment">--   Use this version when your server has not only</span><span>
</span><span id="line-77"></span><span class="hs-comment">--   queries, but also mutations or subscriptions.</span><span>
</span><span id="line-78"></span><span id="local-6989586621679168604"><span id="local-6989586621679168605"><span id="local-6989586621679168606"><span id="local-6989586621679168607"><span id="local-6989586621679168608"><span id="local-6989586621679168609"><span class="annot"><a href="Mu.GraphQL.Server.html#graphQLApp"><span class="hs-identifier hs-type">graphQLApp</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#GraphQLApp"><span class="hs-identifier hs-type">GraphQLApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168609"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168608"><span class="hs-identifier hs-type">qr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168607"><span class="hs-identifier hs-type">mut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168606"><span class="hs-identifier hs-type">sub</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168605"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168604"><span class="hs-identifier hs-type">hs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerT</span></span><span> </span><span class="annot"><a href="#local-6989586621679168605"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">GQL.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621679168609"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168604"><span class="hs-identifier hs-type">hs</span></a></span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168608"><span class="hs-identifier hs-type">qr</span></a></span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168607"><span class="hs-identifier hs-type">mut</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168606"><span class="hs-identifier hs-type">sub</span></a></span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Application</span></span></span></span></span></span></span></span><span>
</span><span id="line-85"></span><span id="graphQLApp"><span class="annot"><span class="annottext">graphQLApp :: ServerT chn Field p ServerErrorIO hs
-&gt; Proxy qr -&gt; Proxy mut -&gt; Proxy sub -&gt; Application
</span><a href="Mu.GraphQL.Server.html#graphQLApp"><span class="hs-identifier hs-var hs-var">graphQLApp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. ServerErrorIO a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p ServerErrorIO hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Application
forall (p :: Package') (qr :: Maybe Symbol) (mut :: Maybe Symbol)
       (sub :: Maybe Symbol) (m :: * -&gt; *) (chn :: ServiceChain Symbol)
       (hs :: [[*]]).
GraphQLApp p qr mut sub m chn hs =&gt;
(forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Application
</span><a href="Mu.GraphQL.Server.html#graphQLAppTrans"><span class="hs-identifier hs-var">graphQLAppTrans</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
forall a. ServerErrorIO a -&gt; ServerErrorIO a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-comment">-- | Turn a Mu GraphQL 'Server' into a WAI 'Application'.</span><span>
</span><span id="line-88"></span><span class="hs-comment">--   Use this version when your server has only queries.</span><span>
</span><span id="line-89"></span><span class="annot"><a href="Mu.GraphQL.Server.html#graphQLAppQuery"><span class="hs-identifier hs-type">graphQLAppQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679168464"><span class="annot"><a href="#local-6989586621679168464"><span class="hs-identifier hs-type">qr</span></a></span></span><span> </span><span id="local-6989586621679168465"><span class="annot"><a href="#local-6989586621679168465"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span id="local-6989586621679168463"><span class="annot"><a href="#local-6989586621679168463"><span class="hs-identifier hs-type">chn</span></a></span></span><span> </span><span id="local-6989586621679168462"><span class="annot"><a href="#local-6989586621679168462"><span class="hs-identifier hs-type">hs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#GraphQLApp"><span class="hs-identifier hs-type">GraphQLApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168465"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679168464"><span class="hs-identifier hs-type">qr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168463"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168462"><span class="hs-identifier hs-type">hs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerT</span></span><span> </span><span class="annot"><a href="#local-6989586621679168463"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">GQL.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621679168465"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168462"><span class="hs-identifier hs-type">hs</span></a></span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168464"><span class="hs-identifier hs-type">qr</span></a></span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Application</span></span><span>
</span><span id="line-95"></span><span id="graphQLAppQuery"><span class="annot"><span class="annottext">graphQLAppQuery :: ServerT chn Field p ServerErrorIO hs -&gt; Proxy qr -&gt; Application
</span><a href="Mu.GraphQL.Server.html#graphQLAppQuery"><span class="hs-identifier hs-var hs-var">graphQLAppQuery</span></a></span></span><span> </span><span id="local-6989586621679168394"><span class="annot"><span class="annottext">ServerT chn Field p ServerErrorIO hs
</span><a href="#local-6989586621679168394"><span class="hs-identifier hs-var">svr</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy qr
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ServerT chn Field p ServerErrorIO hs
-&gt; Proxy ('Just qr)
-&gt; Proxy 'Nothing
-&gt; Proxy 'Nothing
-&gt; Application
forall (p :: Package') (qr :: Maybe Symbol) (mut :: Maybe Symbol)
       (sub :: Maybe Symbol) (chn :: ServiceChain Symbol) (hs :: [[*]]).
GraphQLApp p qr mut sub ServerErrorIO chn hs =&gt;
ServerT chn Field p ServerErrorIO hs
-&gt; Proxy qr -&gt; Proxy mut -&gt; Proxy sub -&gt; Application
</span><a href="Mu.GraphQL.Server.html#graphQLApp"><span class="hs-identifier hs-var">graphQLApp</span></a></span><span> </span><span class="annot"><span class="annottext">ServerT chn Field p ServerErrorIO hs
</span><a href="#local-6989586621679168394"><span class="hs-identifier hs-var">svr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ('Just qr)
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679168464"><span class="hs-identifier hs-type">qr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy 'Nothing
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy 'Nothing
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-comment">-- | Turn a Mu GraphQL 'Server' into a WAI 'Application'</span><span>
</span><span id="line-99"></span><span class="hs-comment">--   using a combined transformer stack.</span><span>
</span><span id="line-100"></span><span class="hs-comment">--   See also documentation for 'graphQLAppQuery'.</span><span>
</span><span id="line-101"></span><span class="annot"><a href="Mu.GraphQL.Server.html#graphQLAppTransQuery"><span class="hs-identifier hs-type">graphQLAppTransQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679168392"><span class="annot"><a href="#local-6989586621679168392"><span class="hs-identifier hs-type">qr</span></a></span></span><span> </span><span id="local-6989586621679168391"><span class="annot"><a href="#local-6989586621679168391"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679168390"><span class="annot"><a href="#local-6989586621679168390"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span id="local-6989586621679168389"><span class="annot"><a href="#local-6989586621679168389"><span class="hs-identifier hs-type">chn</span></a></span></span><span> </span><span id="local-6989586621679168388"><span class="annot"><a href="#local-6989586621679168388"><span class="hs-identifier hs-type">hs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#GraphQLApp"><span class="hs-identifier hs-type">GraphQLApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168390"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679168392"><span class="hs-identifier hs-type">qr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><a href="#local-6989586621679168391"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168389"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168388"><span class="hs-identifier hs-type">hs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679168600"><span class="annot"><a href="#local-6989586621679168600"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679168391"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168600"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168600"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerT</span></span><span> </span><span class="annot"><a href="#local-6989586621679168389"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">GQL.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621679168390"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168391"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168388"><span class="hs-identifier hs-type">hs</span></a></span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168392"><span class="hs-identifier hs-type">qr</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Application</span></span><span>
</span><span id="line-108"></span><span id="graphQLAppTransQuery"><span class="annot"><span class="annottext">graphQLAppTransQuery :: (forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs -&gt; Proxy qr -&gt; Application
</span><a href="Mu.GraphQL.Server.html#graphQLAppTransQuery"><span class="hs-identifier hs-var hs-var">graphQLAppTransQuery</span></a></span></span><span> </span><span id="local-6989586621679168387"><span class="annot"><span class="annottext">forall a. m a -&gt; ServerErrorIO a
</span><a href="#local-6989586621679168387"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679168386"><span class="annot"><span class="annottext">ServerT chn Field p m hs
</span><a href="#local-6989586621679168386"><span class="hs-identifier hs-var">svr</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy qr
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy ('Just qr)
-&gt; Proxy 'Nothing
-&gt; Proxy 'Nothing
-&gt; Application
forall (p :: Package') (qr :: Maybe Symbol) (mut :: Maybe Symbol)
       (sub :: Maybe Symbol) (m :: * -&gt; *) (chn :: ServiceChain Symbol)
       (hs :: [[*]]).
GraphQLApp p qr mut sub m chn hs =&gt;
(forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Application
</span><a href="Mu.GraphQL.Server.html#graphQLAppTrans"><span class="hs-identifier hs-var">graphQLAppTrans</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. m a -&gt; ServerErrorIO a
</span><a href="#local-6989586621679168387"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ServerT chn Field p m hs
</span><a href="#local-6989586621679168386"><span class="hs-identifier hs-var">svr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy ('Just qr)
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679168392"><span class="hs-identifier hs-type">qr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy 'Nothing
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy 'Nothing
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-comment">-- | Turn a Mu GraphQL 'Server' into a WAI 'Application'</span><span>
</span><span id="line-112"></span><span class="hs-comment">--   using a combined transformer stack.</span><span>
</span><span id="line-113"></span><span class="hs-comment">--   See also documentation for 'graphQLApp'.</span><span>
</span><span id="line-114"></span><span id="local-6989586621679168616"><span id="local-6989586621679168617"><span id="local-6989586621679168618"><span id="local-6989586621679168619"><span id="local-6989586621679168620"><span id="local-6989586621679168621"><span id="local-6989586621679168622"><span class="annot"><a href="Mu.GraphQL.Server.html#graphQLAppTrans"><span class="hs-identifier hs-type">graphQLAppTrans</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#GraphQLApp"><span class="hs-identifier hs-type">GraphQLApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168622"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168621"><span class="hs-identifier hs-type">qr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168620"><span class="hs-identifier hs-type">mut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168619"><span class="hs-identifier hs-type">sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168618"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168617"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168616"><span class="hs-identifier hs-type">hs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679168625"><span class="annot"><a href="#local-6989586621679168625"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679168618"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168625"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168625"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerT</span></span><span> </span><span class="annot"><a href="#local-6989586621679168617"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">GQL.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621679168622"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168618"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168616"><span class="hs-identifier hs-type">hs</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168621"><span class="hs-identifier hs-type">qr</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168620"><span class="hs-identifier hs-type">mut</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168619"><span class="hs-identifier hs-type">sub</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Application</span></span></span></span></span></span></span></span></span><span>
</span><span id="line-122"></span><span id="graphQLAppTrans"><span class="annot"><span class="annottext">graphQLAppTrans :: (forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Application
</span><a href="Mu.GraphQL.Server.html#graphQLAppTrans"><span class="hs-identifier hs-var hs-var">graphQLAppTrans</span></a></span></span><span> </span><span id="local-6989586621679168385"><span class="annot"><span class="annottext">forall a. m a -&gt; ServerErrorIO a
</span><a href="#local-6989586621679168385"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679168384"><span class="annot"><span class="annottext">ServerT chn Field p m hs
</span><a href="#local-6989586621679168384"><span class="hs-identifier hs-var">server</span></a></span></span><span> </span><span id="local-6989586621679168383"><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168383"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621679168382"><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168382"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679168381"><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168381"><span class="hs-identifier hs-var">s</span></a></span></span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConnectionOptions -&gt; ServerApp -&gt; Application -&gt; Application
</span><span class="hs-identifier hs-var">WS.websocketsOr</span></span><span> </span><span class="annot"><span class="annottext">ConnectionOptions
</span><span class="hs-identifier hs-var">WS.defaultConnectionOptions</span></span><span>
</span><span id="line-124"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; ServerApp
forall (p :: Package') (qr :: Maybe Symbol) (mut :: Maybe Symbol)
       (sub :: Maybe Symbol) (m :: * -&gt; *) (chn :: ServiceChain Symbol)
       (hs :: [[*]]).
GraphQLApp p qr mut sub m chn hs =&gt;
(forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; ServerApp
</span><a href="Mu.GraphQL.Server.html#wsGraphQLAppTrans"><span class="hs-identifier hs-var">wsGraphQLAppTrans</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. m a -&gt; ServerErrorIO a
</span><a href="#local-6989586621679168385"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ServerT chn Field p m hs
</span><a href="#local-6989586621679168384"><span class="hs-identifier hs-var">server</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168383"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168382"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168381"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Application
forall (p :: Package') (qr :: Maybe Symbol) (mut :: Maybe Symbol)
       (sub :: Maybe Symbol) (m :: * -&gt; *) (chn :: ServiceChain Symbol)
       (hs :: [[*]]).
GraphQLApp p qr mut sub m chn hs =&gt;
(forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Application
</span><a href="Mu.GraphQL.Server.html#httpGraphQLAppTrans"><span class="hs-identifier hs-var">httpGraphQLAppTrans</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. m a -&gt; ServerErrorIO a
</span><a href="#local-6989586621679168385"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ServerT chn Field p m hs
</span><a href="#local-6989586621679168384"><span class="hs-identifier hs-var">server</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168383"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168382"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168381"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span id="local-6989586621679168370"><span id="local-6989586621679168371"><span id="local-6989586621679168372"><span id="local-6989586621679168373"><span id="local-6989586621679168374"><span id="local-6989586621679168375"><span id="local-6989586621679168376"><span class="annot"><a href="Mu.GraphQL.Server.html#httpGraphQLAppTrans"><span class="hs-identifier hs-type">httpGraphQLAppTrans</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#GraphQLApp"><span class="hs-identifier hs-type">GraphQLApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168376"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168375"><span class="hs-identifier hs-type">qr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168374"><span class="hs-identifier hs-type">mut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168373"><span class="hs-identifier hs-type">sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168372"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168371"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168370"><span class="hs-identifier hs-type">hs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679168577"><span class="annot"><a href="#local-6989586621679168577"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679168372"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168577"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168577"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerT</span></span><span> </span><span class="annot"><a href="#local-6989586621679168371"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">GQL.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621679168376"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168372"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168370"><span class="hs-identifier hs-type">hs</span></a></span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168375"><span class="hs-identifier hs-type">qr</span></a></span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168374"><span class="hs-identifier hs-type">mut</span></a></span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168373"><span class="hs-identifier hs-type">sub</span></a></span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Application</span></span></span></span></span></span></span></span></span><span>
</span><span id="line-135"></span><span id="httpGraphQLAppTrans"><span class="annot"><span class="annottext">httpGraphQLAppTrans :: (forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Application
</span><a href="Mu.GraphQL.Server.html#httpGraphQLAppTrans"><span class="hs-identifier hs-var hs-var">httpGraphQLAppTrans</span></a></span></span><span> </span><span id="local-6989586621679168369"><span class="annot"><span class="annottext">forall a. m a -&gt; ServerErrorIO a
</span><a href="#local-6989586621679168369"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679168368"><span class="annot"><span class="annottext">ServerT chn Field p m hs
</span><a href="#local-6989586621679168368"><span class="hs-identifier hs-var">server</span></a></span></span><span> </span><span id="local-6989586621679168367"><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168367"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621679168366"><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168366"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679168365"><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168365"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679168364"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679168364"><span class="hs-identifier hs-var">req</span></a></span></span><span> </span><span id="local-6989586621679168363"><span class="annot"><span class="annottext">Response -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168363"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Method -&gt; Either Method StdMethod
</span><span class="hs-identifier hs-var">parseMethod</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Request -&gt; Method
</span><span class="hs-identifier hs-var hs-var">requestMethod</span></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679168364"><span class="hs-identifier hs-var">req</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-137"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679168361"><span class="annot"><span class="annottext">Method
</span><a href="#local-6989586621679168361"><span class="hs-identifier hs-var">err</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168360"><span class="hs-identifier hs-var">toError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO ResponseReceived) -&gt; Text -&gt; IO ResponseReceived
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(UnicodeException -&gt; Text)
-&gt; (Text -&gt; Text) -&gt; Either UnicodeException Text -&gt; Text
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">UnicodeException -&gt; Text
</span><a href="#local-6989586621679168358"><span class="hs-identifier hs-var">unpackUnicodeException</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Method -&gt; Either UnicodeException Text
</span><span class="hs-identifier hs-var">decodeUtf8'</span></span><span> </span><span class="annot"><span class="annottext">Method
</span><a href="#local-6989586621679168361"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">StdMethod
</span><span class="hs-identifier hs-var">GET</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-139"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679168356"><span class="annot"><span class="annottext">qst :: Query
</span><a href="#local-6989586621679168356"><span class="hs-identifier hs-var hs-var">qst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Request -&gt; Query
</span><span class="hs-identifier hs-var hs-var">queryString</span></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679168364"><span class="hs-identifier hs-var">req</span></a></span><span>
</span><span id="line-140"></span><span>          </span><span id="local-6989586621679168354"><span class="annot"><span class="annottext">opN :: Maybe (Either UnicodeException Text)
</span><a href="#local-6989586621679168354"><span class="hs-identifier hs-var hs-var">opN</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Method -&gt; Either UnicodeException Text
</span><span class="hs-identifier hs-var">decodeUtf8'</span></span><span> </span><span class="annot"><span class="annottext">(Method -&gt; Either UnicodeException Text)
-&gt; Maybe Method -&gt; Maybe (Either UnicodeException Text)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe Method) -&gt; Maybe Method
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Method -&gt; Query -&gt; Maybe (Maybe Method)
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">Method
</span><span class="hs-string">&quot;operationName&quot;</span></span><span> </span><span class="annot"><span class="annottext">Query
</span><a href="#local-6989586621679168356"><span class="hs-identifier hs-var">qst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>          </span><span id="local-6989586621679168352"><span class="annot"><span class="annottext">decodedQuery :: Maybe (Either UnicodeException Text)
</span><a href="#local-6989586621679168352"><span class="hs-identifier hs-var hs-var">decodedQuery</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Method -&gt; Either UnicodeException Text)
-&gt; Maybe Method -&gt; Maybe (Either UnicodeException Text)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Method -&gt; Either UnicodeException Text
</span><span class="hs-identifier hs-var">decodeUtf8'</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Method -&gt; Maybe (Either UnicodeException Text))
-&gt; Maybe (Maybe Method) -&gt; Maybe (Either UnicodeException Text)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Method -&gt; Query -&gt; Maybe (Maybe Method)
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">Method
</span><span class="hs-string">&quot;query&quot;</span></span><span> </span><span class="annot"><span class="annottext">Query
</span><a href="#local-6989586621679168356"><span class="hs-identifier hs-var">qst</span></a></span><span>
</span><span id="line-142"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Either UnicodeException Text)
</span><a href="#local-6989586621679168352"><span class="hs-identifier hs-var">decodedQuery</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Method -&gt; Query -&gt; Maybe (Maybe Method)
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">Method
</span><span class="hs-string">&quot;variables&quot;</span></span><span> </span><span class="annot"><span class="annottext">Query
</span><a href="#local-6989586621679168356"><span class="hs-identifier hs-var">qst</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-143"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679168350"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168350"><span class="hs-identifier hs-var">qry</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679168349"><span class="annot"><span class="annottext">Method
</span><a href="#local-6989586621679168349"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-144"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String VariableMapC
forall a. FromJSON a =&gt; ByteString -&gt; Either String a
</span><span class="hs-identifier hs-var">A.eitherDecode</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Either String VariableMapC)
-&gt; ByteString -&gt; Either String VariableMapC
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Method -&gt; ByteString
</span><span class="hs-identifier hs-var">fromStrict</span></span><span> </span><span class="annot"><span class="annottext">Method
</span><a href="#local-6989586621679168349"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-145"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679168347"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679168347"><span class="hs-identifier hs-var">err</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168360"><span class="hs-identifier hs-var">toError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO ResponseReceived) -&gt; Text -&gt; IO ResponseReceived
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679168347"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-146"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679168345"><span class="annot"><span class="annottext">VariableMapC
</span><a href="#local-6989586621679168345"><span class="hs-identifier hs-var">vrs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Either UnicodeException Text)
-&gt; Either UnicodeException (Maybe Text)
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Either UnicodeException Text)
</span><a href="#local-6989586621679168354"><span class="hs-identifier hs-var">opN</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-147"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679168343"><span class="annot"><span class="annottext">UnicodeException
</span><a href="#local-6989586621679168343"><span class="hs-identifier hs-var">err</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168360"><span class="hs-identifier hs-var">toError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO ResponseReceived) -&gt; Text -&gt; IO ResponseReceived
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Could not parse operation name: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">UnicodeException -&gt; Text
</span><a href="#local-6989586621679168358"><span class="hs-identifier hs-var">unpackUnicodeException</span></a></span><span> </span><span class="annot"><span class="annottext">UnicodeException
</span><a href="#local-6989586621679168343"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-148"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679168342"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679168342"><span class="hs-identifier hs-var">opName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; VariableMapC -&gt; Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168341"><span class="hs-identifier hs-var">execQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679168342"><span class="hs-identifier hs-var">opName</span></a></span><span> </span><span class="annot"><span class="annottext">VariableMapC
</span><a href="#local-6989586621679168345"><span class="hs-identifier hs-var">vrs</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168350"><span class="hs-identifier hs-var">qry</span></a></span><span>
</span><span id="line-149"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679168340"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168340"><span class="hs-identifier hs-var">qry</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe Method)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Either UnicodeException Text)
-&gt; Either UnicodeException (Maybe Text)
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Either UnicodeException Text)
</span><a href="#local-6989586621679168354"><span class="hs-identifier hs-var">opN</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-150"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679168339"><span class="annot"><span class="annottext">UnicodeException
</span><a href="#local-6989586621679168339"><span class="hs-identifier hs-var">err</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168360"><span class="hs-identifier hs-var">toError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO ResponseReceived) -&gt; Text -&gt; IO ResponseReceived
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Could not parse query: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">UnicodeException -&gt; Text
</span><a href="#local-6989586621679168358"><span class="hs-identifier hs-var">unpackUnicodeException</span></a></span><span> </span><span class="annot"><span class="annottext">UnicodeException
</span><a href="#local-6989586621679168339"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-151"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679168338"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679168338"><span class="hs-identifier hs-var">opName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; VariableMapC -&gt; Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168341"><span class="hs-identifier hs-var">execQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679168338"><span class="hs-identifier hs-var">opName</span></a></span><span> </span><span class="annot"><span class="annottext">VariableMapC
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">HM.empty</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168340"><span class="hs-identifier hs-var">qry</span></a></span><span>
</span><span id="line-152"></span><span>        </span><span class="annot"><span class="annottext">(Maybe (Either UnicodeException Text), Maybe (Maybe Method))
</span><span class="hs-identifier">_</span></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168360"><span class="hs-identifier hs-var">toError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Error parsing query&quot;</span></span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">StdMethod
</span><span class="hs-identifier hs-var">POST</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-154"></span><span>      </span><span id="local-6989586621679168336"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679168336"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Request -&gt; IO ByteString
</span><span class="hs-identifier hs-var">strictRequestBody</span></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679168364"><span class="hs-identifier hs-var">req</span></a></span><span>
</span><span id="line-155"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Method -&gt; [Method]
</span><span class="hs-identifier hs-var">split</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">';'</span></span><span> </span><span class="annot"><span class="annottext">(Method -&gt; [Method]) -&gt; Maybe Method -&gt; Maybe [Method]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">HeaderName -&gt; [(HeaderName, Method)] -&gt; Maybe Method
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-identifier hs-var">hContentType</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Request -&gt; [(HeaderName, Method)]
</span><span class="hs-identifier hs-var hs-var">requestHeaders</span></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679168364"><span class="hs-identifier hs-var">req</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-156"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Method
</span><span class="hs-string">&quot;application/json&quot;</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Method]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-157"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either String GraphQLInput
forall a. FromJSON a =&gt; ByteString -&gt; Either String a
</span><span class="hs-identifier hs-var">A.eitherDecode</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679168336"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-158"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679168333"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679168333"><span class="hs-identifier hs-var">err</span></a></span></span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168360"><span class="hs-identifier hs-var">toError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO ResponseReceived) -&gt; Text -&gt; IO ResponseReceived
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679168333"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-159"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.GraphQL.Server.html#GraphQLInput"><span class="hs-identifier hs-type">GraphQLInput</span></a></span><span> </span><span id="local-6989586621679168332"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168332"><span class="hs-identifier hs-var">qry</span></a></span></span><span> </span><span id="local-6989586621679168331"><span class="annot"><span class="annottext">VariableMapC
</span><a href="#local-6989586621679168331"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621679168330"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679168330"><span class="hs-identifier hs-var">opName</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; VariableMapC -&gt; Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168341"><span class="hs-identifier hs-var">execQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679168330"><span class="hs-identifier hs-var">opName</span></a></span><span> </span><span class="annot"><span class="annottext">VariableMapC
</span><a href="#local-6989586621679168331"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168332"><span class="hs-identifier hs-var">qry</span></a></span><span>
</span><span id="line-160"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Method
</span><span class="hs-string">&quot;application/graphql&quot;</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Method]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-161"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Method -&gt; Either UnicodeException Text
</span><span class="hs-identifier hs-var">decodeUtf8'</span></span><span> </span><span class="annot"><span class="annottext">(Method -&gt; Either UnicodeException Text)
-&gt; Method -&gt; Either UnicodeException Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Method
</span><span class="hs-identifier hs-var">toStrict</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679168336"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-162"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679168329"><span class="annot"><span class="annottext">UnicodeException
</span><a href="#local-6989586621679168329"><span class="hs-identifier hs-var">err</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168360"><span class="hs-identifier hs-var">toError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO ResponseReceived) -&gt; Text -&gt; IO ResponseReceived
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Could not decode utf8 from body: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">UnicodeException -&gt; Text
</span><a href="#local-6989586621679168358"><span class="hs-identifier hs-var">unpackUnicodeException</span></a></span><span> </span><span class="annot"><span class="annottext">UnicodeException
</span><a href="#local-6989586621679168329"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-163"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679168328"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168328"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; VariableMapC -&gt; Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168341"><span class="hs-identifier hs-var">execQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">VariableMapC
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">HM.empty</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168328"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-164"></span><span>        </span><span class="annot"><span class="annottext">Maybe [Method]
</span><span class="hs-identifier">_</span></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168360"><span class="hs-identifier hs-var">toError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;No `Content-Type` header found!&quot;</span></span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><span class="annottext">Either Method StdMethod
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168360"><span class="hs-identifier hs-var">toError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unsupported method&quot;</span></span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-167"></span><span>    </span><span class="annot"><a href="#local-6989586621679168341"><span class="hs-identifier hs-type">execQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Parse.html#VariableMapC"><span class="hs-identifier hs-type">VariableMapC</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ResponseReceived</span></span><span>
</span><span id="line-168"></span><span>    </span><span id="local-6989586621679168341"><span class="annot"><span class="annottext">execQuery :: Maybe Text -&gt; VariableMapC -&gt; Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168341"><span class="hs-identifier hs-var hs-var">execQuery</span></a></span></span><span> </span><span id="local-6989586621679168327"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679168327"><span class="hs-identifier hs-var">opn</span></a></span></span><span> </span><span id="local-6989586621679168326"><span class="annot"><span class="annottext">VariableMapC
</span><a href="#local-6989586621679168326"><span class="hs-identifier hs-var">vals</span></a></span></span><span> </span><span id="local-6989586621679168325"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168325"><span class="hs-identifier hs-var">qry</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-169"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either Text [Definition]
</span><a href="Mu.GraphQL.Quasi.LostParser.html#parseDoc"><span class="hs-identifier hs-var">parseDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168325"><span class="hs-identifier hs-var">qry</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-170"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679168324"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168324"><span class="hs-identifier hs-var">err</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168360"><span class="hs-identifier hs-var">toError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168324"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-171"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679168323"><span class="annot"><span class="annottext">[Definition]
</span><a href="#local-6989586621679168323"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(forall a. m a -&gt; ServerErrorIO a)
-&gt; [(HeaderName, Method)]
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Maybe Text
-&gt; VariableMapC
-&gt; [Definition]
-&gt; IO Value
forall (qr :: Maybe Symbol) (mut :: Maybe Symbol)
       (sub :: Maybe Symbol) (p :: Package') (m :: * -&gt; *)
       (chn :: ServiceChain Symbol) (hs :: [[*]]).
GraphQLApp p qr mut sub m chn hs =&gt;
(forall a. m a -&gt; ServerErrorIO a)
-&gt; [(HeaderName, Method)]
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Maybe Text
-&gt; VariableMapC
-&gt; [Definition]
-&gt; IO Value
</span><a href="Mu.GraphQL.Query.Run.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. m a -&gt; ServerErrorIO a
</span><a href="#local-6989586621679168369"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Request -&gt; [(HeaderName, Method)]
</span><span class="hs-identifier hs-var hs-var">requestHeaders</span></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621679168364"><span class="hs-identifier hs-var">req</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ServerT chn Field p m hs
</span><a href="#local-6989586621679168368"><span class="hs-identifier hs-var">server</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168367"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168366"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168365"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679168327"><span class="hs-identifier hs-var">opn</span></a></span><span> </span><span class="annot"><span class="annottext">VariableMapC
</span><a href="#local-6989586621679168326"><span class="hs-identifier hs-var">vals</span></a></span><span> </span><span class="annot"><span class="annottext">[Definition]
</span><a href="#local-6989586621679168323"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-172"></span><span>                       </span><span class="annot"><span class="annottext">IO Value -&gt; (Value -&gt; IO ResponseReceived) -&gt; IO ResponseReceived
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168322"><span class="hs-identifier hs-var">toResponse</span></a></span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><a href="#local-6989586621679168360"><span class="hs-identifier hs-type">toError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ResponseReceived</span></span><span>
</span><span id="line-174"></span><span>    </span><span id="local-6989586621679168360"><span class="annot"><span class="annottext">toError :: Text -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168360"><span class="hs-identifier hs-var hs-var">toError</span></a></span></span><span> </span><span id="local-6989586621679168321"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168321"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168322"><span class="hs-identifier hs-var">toResponse</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; IO ResponseReceived) -&gt; Value -&gt; IO ResponseReceived
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">A.object</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;errors&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Array -&gt; Value
</span><span class="hs-identifier hs-var">A.Array</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">A.object</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;message&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">A.String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679168321"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-175"></span><span>    </span><span class="annot"><a href="#local-6989586621679168322"><span class="hs-identifier hs-type">toResponse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ResponseReceived</span></span><span>
</span><span id="line-176"></span><span>    </span><span id="local-6989586621679168322"><span class="annot"><span class="annottext">toResponse :: Value -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168322"><span class="hs-identifier hs-var hs-var">toResponse</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Response -&gt; IO ResponseReceived
</span><a href="#local-6989586621679168363"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">(Response -&gt; IO ResponseReceived)
-&gt; (Value -&gt; Response) -&gt; Value -&gt; IO ResponseReceived
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Status -&gt; [(HeaderName, Method)] -&gt; Builder -&gt; Response
</span><span class="hs-identifier hs-var">responseBuilder</span></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier hs-var">ok200</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Builder -&gt; Response) -&gt; (Value -&gt; Builder) -&gt; Value -&gt; Response
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Builder
</span><span class="hs-identifier hs-var">T.encodeUtf8Builder</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Builder) -&gt; (Value -&gt; Text) -&gt; Value -&gt; Builder
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Text
forall a. ToJSON a =&gt; a -&gt; Text
</span><span class="hs-identifier hs-var">encodeToLazyText</span></span><span>
</span><span id="line-177"></span><span>    </span><span class="annot"><a href="#local-6989586621679168358"><span class="hs-identifier hs-type">unpackUnicodeException</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">UnicodeException</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span>
</span><span id="line-178"></span><span>    </span><span id="local-6989586621679168358"><span class="annot"><span class="annottext">unpackUnicodeException :: UnicodeException -&gt; Text
</span><a href="#local-6989586621679168358"><span class="hs-identifier hs-var hs-var">unpackUnicodeException</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DecodeError</span></span><span> </span><span id="local-6989586621679168313"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679168313"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Word8
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679168313"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><a href="#local-6989586621679168358"><span class="hs-identifier hs-var">unpackUnicodeException</span></a></span><span> </span><span class="annot"><span class="annottext">UnicodeException
</span><span class="hs-identifier">_</span></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;EncodeError is deprecated&quot;</span></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span id="local-6989586621679168580"><span id="local-6989586621679168581"><span id="local-6989586621679168582"><span id="local-6989586621679168583"><span id="local-6989586621679168584"><span id="local-6989586621679168585"><span id="local-6989586621679168586"><span class="annot"><a href="Mu.GraphQL.Server.html#wsGraphQLAppTrans"><span class="hs-identifier hs-type">wsGraphQLAppTrans</span></a></span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#GraphQLApp"><span class="hs-identifier hs-type">GraphQLApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168586"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168585"><span class="hs-identifier hs-type">qr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168584"><span class="hs-identifier hs-type">mut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168583"><span class="hs-identifier hs-type">sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168582"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168581"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168580"><span class="hs-identifier hs-type">hs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679168579"><span class="annot"><a href="#local-6989586621679168579"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679168582"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168579"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168579"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerT</span></span><span> </span><span class="annot"><a href="#local-6989586621679168581"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">GQL.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621679168586"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168582"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168580"><span class="hs-identifier hs-type">hs</span></a></span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168585"><span class="hs-identifier hs-type">qr</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168584"><span class="hs-identifier hs-type">mut</span></a></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168583"><span class="hs-identifier hs-type">sub</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">WS.ServerApp</span></span></span></span></span></span></span></span></span><span>
</span><span id="line-189"></span><span id="wsGraphQLAppTrans"><span class="annot"><span class="annottext">wsGraphQLAppTrans :: (forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; ServerApp
</span><a href="Mu.GraphQL.Server.html#wsGraphQLAppTrans"><span class="hs-identifier hs-var hs-var">wsGraphQLAppTrans</span></a></span></span><span> </span><span id="local-6989586621679168311"><span class="annot"><span class="annottext">forall a. m a -&gt; ServerErrorIO a
</span><a href="#local-6989586621679168311"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679168310"><span class="annot"><span class="annottext">ServerT chn Field p m hs
</span><a href="#local-6989586621679168310"><span class="hs-identifier hs-var">server</span></a></span></span><span> </span><span id="local-6989586621679168309"><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168309"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621679168308"><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168308"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679168307"><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168307"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679168306"><span class="annot"><span class="annottext">PendingConnection
</span><a href="#local-6989586621679168306"><span class="hs-identifier hs-var">conn</span></a></span></span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679168305"><span class="annot"><span class="annottext">headers :: [(HeaderName, Method)]
</span><a href="#local-6989586621679168305"><span class="hs-identifier hs-var hs-var">headers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RequestHead -&gt; [(HeaderName, Method)]
</span><span class="hs-identifier hs-var hs-var">WS.requestHeaders</span></span><span> </span><span class="annot"><span class="annottext">(RequestHead -&gt; [(HeaderName, Method)])
-&gt; RequestHead -&gt; [(HeaderName, Method)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PendingConnection -&gt; RequestHead
</span><span class="hs-identifier hs-var hs-var">WS.pendingRequest</span></span><span> </span><span class="annot"><span class="annottext">PendingConnection
</span><a href="#local-6989586621679168306"><span class="hs-identifier hs-var">conn</span></a></span><span>
</span><span id="line-191"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HeaderName -&gt; [(HeaderName, Method)] -&gt; Maybe Method
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">HeaderName
</span><span class="hs-string">&quot;Sec-WebSocket-Protocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">[(HeaderName, Method)]
</span><a href="#local-6989586621679168305"><span class="hs-identifier hs-var">headers</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-192"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679168302"><span class="annot"><span class="annottext">Method
</span><a href="#local-6989586621679168302"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-193"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Method
</span><a href="#local-6989586621679168302"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Method -&gt; Method -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Method
</span><span class="hs-string">&quot;graphql-ws&quot;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Method
</span><a href="#local-6989586621679168302"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Method -&gt; Method -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Method
</span><span class="hs-string">&quot;graphql-transport-ws&quot;</span></span><span>
</span><span id="line-194"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679168300"><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679168300"><span class="hs-identifier hs-var">conn'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PendingConnection -&gt; AcceptRequest -&gt; IO Connection
</span><span class="hs-identifier hs-var">WS.acceptRequestWith</span></span><span> </span><span class="annot"><span class="annottext">PendingConnection
</span><a href="#local-6989586621679168306"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Method -&gt; [(HeaderName, Method)] -&gt; AcceptRequest
</span><span class="hs-identifier hs-var">WS.AcceptRequest</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Method -&gt; Maybe Method
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Method
</span><a href="#local-6989586621679168302"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>                 </span><span class="annot"><span class="annottext">((Maybe Text
  -&gt; VariableMapC
  -&gt; [Definition]
  -&gt; ConduitT Value Void IO ()
  -&gt; IO ())
 -&gt; Connection -&gt; IO ())
-&gt; Connection
-&gt; (Maybe Text
    -&gt; VariableMapC
    -&gt; [Definition]
    -&gt; ConduitT Value Void IO ()
    -&gt; IO ())
-&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Text
 -&gt; VariableMapC
 -&gt; [Definition]
 -&gt; ConduitT Value Void IO ()
 -&gt; IO ())
-&gt; Connection -&gt; IO ()
</span><a href="Mu.GraphQL.Subscription.Protocol.html#protocol"><span class="hs-identifier hs-var">protocol</span></a></span><span> </span><span class="annot"><span class="annottext">Connection
</span><a href="#local-6989586621679168300"><span class="hs-identifier hs-var">conn'</span></a></span><span> </span><span class="annot"><span class="annottext">((Maybe Text
  -&gt; VariableMapC
  -&gt; [Definition]
  -&gt; ConduitT Value Void IO ()
  -&gt; IO ())
 -&gt; IO ())
-&gt; (Maybe Text
    -&gt; VariableMapC
    -&gt; [Definition]
    -&gt; ConduitT Value Void IO ()
    -&gt; IO ())
-&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-196"></span><span>                   </span><span class="annot"><span class="annottext">(forall a. m a -&gt; ServerErrorIO a)
-&gt; [(HeaderName, Method)]
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Maybe Text
-&gt; VariableMapC
-&gt; [Definition]
-&gt; ConduitT Value Void IO ()
-&gt; IO ()
forall (qr :: Maybe Symbol) (mut :: Maybe Symbol)
       (sub :: Maybe Symbol) (p :: Package') (m :: * -&gt; *)
       (chn :: ServiceChain Symbol) (hs :: [[*]]).
GraphQLApp p qr mut sub m chn hs =&gt;
(forall a. m a -&gt; ServerErrorIO a)
-&gt; [(HeaderName, Method)]
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Maybe Text
-&gt; VariableMapC
-&gt; [Definition]
-&gt; ConduitT Value Void IO ()
-&gt; IO ()
</span><a href="Mu.GraphQL.Query.Run.html#runSubscriptionPipeline"><span class="hs-identifier hs-var">runSubscriptionPipeline</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. m a -&gt; ServerErrorIO a
</span><a href="#local-6989586621679168311"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[(HeaderName, Method)]
</span><a href="#local-6989586621679168305"><span class="hs-identifier hs-var">headers</span></a></span><span> </span><span class="annot"><span class="annottext">ServerT chn Field p m hs
</span><a href="#local-6989586621679168310"><span class="hs-identifier hs-var">server</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168309"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168308"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168307"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-197"></span><span>         </span><span class="annot"><span class="annottext">Maybe Method
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PendingConnection -&gt; Method -&gt; IO ()
</span><span class="hs-identifier hs-var">WS.rejectRequest</span></span><span> </span><span class="annot"><span class="annottext">PendingConnection
</span><a href="#local-6989586621679168306"><span class="hs-identifier hs-var">conn</span></a></span><span> </span><span class="annot"><span class="annottext">Method
</span><span class="hs-string">&quot;unsupported protocol&quot;</span></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-comment">-- | Run a Mu 'graphQLApp' using the given 'Settings'.</span><span>
</span><span id="line-200"></span><span class="hs-comment">--</span><span>
</span><span id="line-201"></span><span class="hs-comment">--   Go to 'Network.Wai.Handler.Warp' to declare 'Settings'.</span><span>
</span><span id="line-202"></span><span id="local-6989586621679168290"><span id="local-6989586621679168291"><span id="local-6989586621679168292"><span id="local-6989586621679168293"><span id="local-6989586621679168294"><span id="local-6989586621679168295"><span class="annot"><a href="Mu.GraphQL.Server.html#runGraphQLAppSettings"><span class="hs-identifier hs-type">runGraphQLAppSettings</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#GraphQLApp"><span class="hs-identifier hs-type">GraphQLApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168295"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168294"><span class="hs-identifier hs-type">qr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168293"><span class="hs-identifier hs-type">mut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168292"><span class="hs-identifier hs-type">sub</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168291"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168290"><span class="hs-identifier hs-type">hs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Settings</span></span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerT</span></span><span> </span><span class="annot"><a href="#local-6989586621679168291"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">GQL.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621679168295"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168290"><span class="hs-identifier hs-type">hs</span></a></span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168294"><span class="hs-identifier hs-type">qr</span></a></span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168293"><span class="hs-identifier hs-type">mut</span></a></span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168292"><span class="hs-identifier hs-type">sub</span></a></span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-210"></span><span id="runGraphQLAppSettings"><span class="annot"><span class="annottext">runGraphQLAppSettings :: Settings
-&gt; ServerT chn Field p ServerErrorIO hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; IO ()
</span><a href="Mu.GraphQL.Server.html#runGraphQLAppSettings"><span class="hs-identifier hs-var hs-var">runGraphQLAppSettings</span></a></span></span><span> </span><span id="local-6989586621679168289"><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679168289"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621679168288"><span class="annot"><span class="annottext">ServerT chn Field p ServerErrorIO hs
</span><a href="#local-6989586621679168288"><span class="hs-identifier hs-var">svr</span></a></span></span><span> </span><span id="local-6989586621679168287"><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168287"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621679168286"><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168286"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679168285"><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168285"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Settings -&gt; Application -&gt; IO ()
</span><span class="hs-identifier hs-var">runSettings</span></span><span> </span><span class="annot"><span class="annottext">Settings
</span><a href="#local-6989586621679168289"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ServerT chn Field p ServerErrorIO hs
-&gt; Proxy qr -&gt; Proxy mut -&gt; Proxy sub -&gt; Application
forall (p :: Package') (qr :: Maybe Symbol) (mut :: Maybe Symbol)
       (sub :: Maybe Symbol) (chn :: ServiceChain Symbol) (hs :: [[*]]).
GraphQLApp p qr mut sub ServerErrorIO chn hs =&gt;
ServerT chn Field p ServerErrorIO hs
-&gt; Proxy qr -&gt; Proxy mut -&gt; Proxy sub -&gt; Application
</span><a href="Mu.GraphQL.Server.html#graphQLApp"><span class="hs-identifier hs-var">graphQLApp</span></a></span><span> </span><span class="annot"><span class="annottext">ServerT chn Field p ServerErrorIO hs
</span><a href="#local-6989586621679168288"><span class="hs-identifier hs-var">svr</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168287"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168286"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168285"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span class="hs-comment">-- | Run a Mu 'graphQLApp' on the given port.</span><span>
</span><span id="line-213"></span><span id="local-6989586621679168279"><span id="local-6989586621679168280"><span id="local-6989586621679168281"><span id="local-6989586621679168282"><span id="local-6989586621679168283"><span id="local-6989586621679168284"><span class="annot"><a href="Mu.GraphQL.Server.html#runGraphQLApp"><span class="hs-identifier hs-type">runGraphQLApp</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#GraphQLApp"><span class="hs-identifier hs-type">GraphQLApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168284"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168283"><span class="hs-identifier hs-type">qr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168282"><span class="hs-identifier hs-type">mut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168281"><span class="hs-identifier hs-type">sub</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168280"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168279"><span class="hs-identifier hs-type">hs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Port</span></span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerT</span></span><span> </span><span class="annot"><a href="#local-6989586621679168280"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">GQL.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621679168284"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168279"><span class="hs-identifier hs-type">hs</span></a></span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168283"><span class="hs-identifier hs-type">qr</span></a></span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168282"><span class="hs-identifier hs-type">mut</span></a></span><span>
</span><span id="line-219"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168281"><span class="hs-identifier hs-type">sub</span></a></span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-221"></span><span id="runGraphQLApp"><span class="annot"><span class="annottext">runGraphQLApp :: Port
-&gt; ServerT chn Field p ServerErrorIO hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; IO ()
</span><a href="Mu.GraphQL.Server.html#runGraphQLApp"><span class="hs-identifier hs-var hs-var">runGraphQLApp</span></a></span></span><span> </span><span id="local-6989586621679168278"><span class="annot"><span class="annottext">Port
</span><a href="#local-6989586621679168278"><span class="hs-identifier hs-var">port</span></a></span></span><span> </span><span id="local-6989586621679168277"><span class="annot"><span class="annottext">ServerT chn Field p ServerErrorIO hs
</span><a href="#local-6989586621679168277"><span class="hs-identifier hs-var">svr</span></a></span></span><span> </span><span id="local-6989586621679168276"><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168276"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621679168275"><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168275"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679168274"><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168274"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Port -&gt; Application -&gt; IO ()
</span><span class="hs-identifier hs-var">run</span></span><span> </span><span class="annot"><span class="annottext">Port
</span><a href="#local-6989586621679168278"><span class="hs-identifier hs-var">port</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ServerT chn Field p ServerErrorIO hs
-&gt; Proxy qr -&gt; Proxy mut -&gt; Proxy sub -&gt; Application
forall (p :: Package') (qr :: Maybe Symbol) (mut :: Maybe Symbol)
       (sub :: Maybe Symbol) (chn :: ServiceChain Symbol) (hs :: [[*]]).
GraphQLApp p qr mut sub ServerErrorIO chn hs =&gt;
ServerT chn Field p ServerErrorIO hs
-&gt; Proxy qr -&gt; Proxy mut -&gt; Proxy sub -&gt; Application
</span><a href="Mu.GraphQL.Server.html#graphQLApp"><span class="hs-identifier hs-var">graphQLApp</span></a></span><span> </span><span class="annot"><span class="annottext">ServerT chn Field p ServerErrorIO hs
</span><a href="#local-6989586621679168277"><span class="hs-identifier hs-var">svr</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168276"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168275"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168274"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-comment">-- | Run a Mu 'graphQLApp' on a transformer stack on the given port.</span><span>
</span><span id="line-224"></span><span id="local-6989586621679168267"><span id="local-6989586621679168268"><span id="local-6989586621679168269"><span id="local-6989586621679168270"><span id="local-6989586621679168271"><span id="local-6989586621679168272"><span id="local-6989586621679168273"><span class="annot"><a href="Mu.GraphQL.Server.html#runGraphQLAppTrans"><span class="hs-identifier hs-type">runGraphQLAppTrans</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#GraphQLApp"><span class="hs-identifier hs-type">GraphQLApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168273"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168272"><span class="hs-identifier hs-type">qr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168271"><span class="hs-identifier hs-type">mut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168270"><span class="hs-identifier hs-type">sub</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168269"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168268"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168267"><span class="hs-identifier hs-type">hs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Port</span></span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679168476"><span class="annot"><a href="#local-6989586621679168476"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679168269"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168476"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168476"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerT</span></span><span> </span><span class="annot"><a href="#local-6989586621679168268"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">GQL.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621679168273"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168269"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168267"><span class="hs-identifier hs-type">hs</span></a></span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168272"><span class="hs-identifier hs-type">qr</span></a></span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168271"><span class="hs-identifier hs-type">mut</span></a></span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168270"><span class="hs-identifier hs-type">sub</span></a></span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span></span></span></span><span>
</span><span id="line-233"></span><span id="runGraphQLAppTrans"><span class="annot"><span class="annottext">runGraphQLAppTrans :: Port
-&gt; (forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; IO ()
</span><a href="Mu.GraphQL.Server.html#runGraphQLAppTrans"><span class="hs-identifier hs-var hs-var">runGraphQLAppTrans</span></a></span></span><span> </span><span id="local-6989586621679168266"><span class="annot"><span class="annottext">Port
</span><a href="#local-6989586621679168266"><span class="hs-identifier hs-var">port</span></a></span></span><span> </span><span id="local-6989586621679168265"><span class="annot"><span class="annottext">forall a. m a -&gt; ServerErrorIO a
</span><a href="#local-6989586621679168265"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679168264"><span class="annot"><span class="annottext">ServerT chn Field p m hs
</span><a href="#local-6989586621679168264"><span class="hs-identifier hs-var">svr</span></a></span></span><span> </span><span id="local-6989586621679168263"><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168263"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621679168262"><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168262"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679168261"><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168261"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Port -&gt; Application -&gt; IO ()
</span><span class="hs-identifier hs-var">run</span></span><span> </span><span class="annot"><span class="annottext">Port
</span><a href="#local-6989586621679168266"><span class="hs-identifier hs-var">port</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Application
forall (p :: Package') (qr :: Maybe Symbol) (mut :: Maybe Symbol)
       (sub :: Maybe Symbol) (m :: * -&gt; *) (chn :: ServiceChain Symbol)
       (hs :: [[*]]).
GraphQLApp p qr mut sub m chn hs =&gt;
(forall a. m a -&gt; ServerErrorIO a)
-&gt; ServerT chn Field p m hs
-&gt; Proxy qr
-&gt; Proxy mut
-&gt; Proxy sub
-&gt; Application
</span><a href="Mu.GraphQL.Server.html#graphQLAppTrans"><span class="hs-identifier hs-var">graphQLAppTrans</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. m a -&gt; ServerErrorIO a
</span><a href="#local-6989586621679168265"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ServerT chn Field p m hs
</span><a href="#local-6989586621679168264"><span class="hs-identifier hs-var">svr</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168263"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy mut
</span><a href="#local-6989586621679168262"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy sub
</span><a href="#local-6989586621679168261"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-comment">-- | Run a query-only Mu 'graphQLApp' on the given port.</span><span>
</span><span id="line-236"></span><span id="local-6989586621679168257"><span id="local-6989586621679168258"><span id="local-6989586621679168259"><span id="local-6989586621679168260"><span class="annot"><a href="Mu.GraphQL.Server.html#runGraphQLAppQuery"><span class="hs-identifier hs-type">runGraphQLAppQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Mu.GraphQL.Query.Run.html#GraphQLApp"><span class="hs-identifier hs-type">GraphQLApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168260"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679168259"><span class="hs-identifier hs-type">qr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168258"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168257"><span class="hs-identifier hs-type">hs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Port</span></span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerT</span></span><span> </span><span class="annot"><a href="#local-6989586621679168258"><span class="hs-identifier hs-type">chn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">GQL.Field</span></span><span> </span><span class="annot"><a href="#local-6989586621679168260"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168257"><span class="hs-identifier hs-type">hs</span></a></span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679168259"><span class="hs-identifier hs-type">qr</span></a></span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-242"></span><span id="runGraphQLAppQuery"><span class="annot"><span class="annottext">runGraphQLAppQuery :: Port -&gt; ServerT chn Field p ServerErrorIO hs -&gt; Proxy qr -&gt; IO ()
</span><a href="Mu.GraphQL.Server.html#runGraphQLAppQuery"><span class="hs-identifier hs-var hs-var">runGraphQLAppQuery</span></a></span></span><span> </span><span id="local-6989586621679168256"><span class="annot"><span class="annottext">Port
</span><a href="#local-6989586621679168256"><span class="hs-identifier hs-var">port</span></a></span></span><span> </span><span id="local-6989586621679168255"><span class="annot"><span class="annottext">ServerT chn Field p ServerErrorIO hs
</span><a href="#local-6989586621679168255"><span class="hs-identifier hs-var">svr</span></a></span></span><span> </span><span id="local-6989586621679168254"><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168254"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Port -&gt; Application -&gt; IO ()
</span><span class="hs-identifier hs-var">run</span></span><span> </span><span class="annot"><span class="annottext">Port
</span><a href="#local-6989586621679168256"><span class="hs-identifier hs-var">port</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ServerT chn Field p ServerErrorIO hs -&gt; Proxy qr -&gt; Application
forall (qr :: Symbol) (p :: Package') (chn :: ServiceChain Symbol)
       (hs :: [[*]]).
GraphQLApp p ('Just qr) 'Nothing 'Nothing ServerErrorIO chn hs =&gt;
ServerT chn Field p ServerErrorIO hs -&gt; Proxy qr -&gt; Application
</span><a href="Mu.GraphQL.Server.html#graphQLAppQuery"><span class="hs-identifier hs-var">graphQLAppQuery</span></a></span><span> </span><span class="annot"><span class="annottext">ServerT chn Field p ServerErrorIO hs
</span><a href="#local-6989586621679168255"><span class="hs-identifier hs-var">svr</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy qr
</span><a href="#local-6989586621679168254"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-comment">-- | Turns a 'Conduit' working on 'ServerErrorIO'</span><span>
</span><span id="line-245"></span><span class="hs-comment">--   into any other base monad which supports 'IO',</span><span>
</span><span id="line-246"></span><span class="hs-comment">--   by raising any error as an exception.</span><span>
</span><span id="line-247"></span><span class="hs-comment">--</span><span>
</span><span id="line-248"></span><span class="hs-comment">--   This function is useful to interoperate with</span><span>
</span><span id="line-249"></span><span class="hs-comment">--   libraries which generate 'Conduit's with other</span><span>
</span><span id="line-250"></span><span class="hs-comment">--   base monads, such as @persistent@.</span><span>
</span><span id="line-251"></span><span id="local-6989586621679168250"><span id="local-6989586621679168251"><span id="local-6989586621679168252"><span id="local-6989586621679168253"><span class="annot"><a href="Mu.GraphQL.Server.html#liftServerConduit"><span class="hs-identifier hs-type">liftServerConduit</span></a></span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168253"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><a href="#local-6989586621679168252"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168251"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168250"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><a href="#local-6989586621679168252"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168251"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168253"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168250"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span><span>
</span><span id="line-254"></span><span id="liftServerConduit"><span class="annot"><span class="annottext">liftServerConduit :: ConduitT i o ServerErrorIO r -&gt; ConduitT i o m r
</span><a href="Mu.GraphQL.Server.html#liftServerConduit"><span class="hs-identifier hs-var hs-var">liftServerConduit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. ServerErrorIO a -&gt; m a)
-&gt; ConduitT i o ServerErrorIO r -&gt; ConduitT i o m r
forall (m :: * -&gt; *) (n :: * -&gt; *) i o r.
Monad m =&gt;
(forall a. m a -&gt; n a) -&gt; ConduitT i o m r -&gt; ConduitT i o n r
</span><span class="hs-identifier hs-var">transPipe</span></span><span> </span><span class="annot"><span class="annottext">forall a. ServerErrorIO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; ServerErrorIO a -&gt; m a
</span><a href="#local-6989586621679168249"><span class="hs-identifier hs-var">raiseErrors</span></a></span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span class="annot"><a href="#local-6989586621679168249"><span class="hs-identifier hs-type">raiseErrors</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679168451"><span class="annot"><a href="#local-6989586621679168451"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679168449"><span class="annot"><a href="#local-6989586621679168449"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168451"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ServerErrorIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679168449"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679168451"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679168449"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-256"></span><span>        </span><span id="local-6989586621679168249"><span class="annot"><span class="annottext">raiseErrors :: ServerErrorIO a -&gt; m a
</span><a href="#local-6989586621679168249"><span class="hs-identifier hs-var hs-var">raiseErrors</span></a></span></span><span> </span><span id="local-6989586621679168248"><span class="annot"><span class="annottext">ServerErrorIO a
</span><a href="#local-6989586621679168248"><span class="hs-identifier hs-var">h</span></a></span></span><span>
</span><span id="line-257"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; m a) -&gt; IO a -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-258"></span><span>              </span><span id="local-6989586621679168246"><span class="annot"><span class="annottext">Either ServerError a
</span><a href="#local-6989586621679168246"><span class="hs-identifier hs-var">h'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ServerErrorIO a -&gt; IO (Either ServerError a)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span> </span><span class="annot"><span class="annottext">ServerErrorIO a
</span><a href="#local-6989586621679168248"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-259"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ServerError a
</span><a href="#local-6989586621679168246"><span class="hs-identifier hs-var">h'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-260"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679168245"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679168245"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679168245"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-261"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span>  </span><span id="local-6989586621679168244"><span class="annot"><span class="annottext">ServerError
</span><a href="#local-6989586621679168244"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ServerError -&gt; IO a
forall a e. Exception e =&gt; e -&gt; a
</span><span class="hs-identifier hs-var">throw</span></span><span> </span><span class="annot"><span class="annottext">ServerError
</span><a href="#local-6989586621679168244"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-262"></span></pre></body></html>